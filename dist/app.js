var Growmark=(()=>{var cr=Object.create;var vi=Object.defineProperty;var dr=Object.getOwnPropertyDescriptor;var fr=Object.getOwnPropertyNames;var pr=Object.getPrototypeOf,mr=Object.prototype.hasOwnProperty;var Ot=(r=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(r,{get:(t,e)=>(typeof require!="undefined"?require:t)[e]}):r)(function(r){if(typeof require!="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+r+'" is not supported')});var gr=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var yr=(r,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of fr(t))!mr.call(r,n)&&n!==e&&vi(r,n,{get:()=>t[n],enumerable:!(i=dr(t,n))||i.enumerable});return r};var br=(r,t,e)=>(e=r!=null?cr(pr(r)):{},yr(t||!r||!r.__esModule?vi(e,"default",{value:r,enumerable:!0}):e,r));var Qi=gr((qi,ui)=>{(function(r){typeof qi=="object"&&typeof ui!="undefined"?ui.exports=r():typeof define=="function"&&define.amd?define([],r):(typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this).JSZip=r()})(function(){return function r(t,e,i){function n(c,g){if(!e[c]){if(!t[c]){var m=typeof Ot=="function"&&Ot;if(!g&&m)return m(c,!0);if(s)return s(c,!0);var v=new Error("Cannot find module '"+c+"'");throw v.code="MODULE_NOT_FOUND",v}var h=e[c]={exports:{}};t[c][0].call(h.exports,function(y){var u=t[c][1][y];return n(u||y)},h,h.exports,r,t,e,i)}return e[c].exports}for(var s=typeof Ot=="function"&&Ot,l=0;l<i.length;l++)n(i[l]);return n}({1:[function(r,t,e){"use strict";var i=r("./utils"),n=r("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.encode=function(l){for(var c,g,m,v,h,y,u,f=[],d=0,w=l.length,k=w,x=i.getTypeOf(l)!=="string";d<l.length;)k=w-d,m=x?(c=l[d++],g=d<w?l[d++]:0,d<w?l[d++]:0):(c=l.charCodeAt(d++),g=d<w?l.charCodeAt(d++):0,d<w?l.charCodeAt(d++):0),v=c>>2,h=(3&c)<<4|g>>4,y=1<k?(15&g)<<2|m>>6:64,u=2<k?63&m:64,f.push(s.charAt(v)+s.charAt(h)+s.charAt(y)+s.charAt(u));return f.join("")},e.decode=function(l){var c,g,m,v,h,y,u=0,f=0,d="data:";if(l.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var w,k=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===s.charAt(64)&&k--,l.charAt(l.length-2)===s.charAt(64)&&k--,k%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=n.uint8array?new Uint8Array(0|k):new Array(0|k);u<l.length;)c=s.indexOf(l.charAt(u++))<<2|(v=s.indexOf(l.charAt(u++)))>>4,g=(15&v)<<4|(h=s.indexOf(l.charAt(u++)))>>2,m=(3&h)<<6|(y=s.indexOf(l.charAt(u++))),w[f++]=c,h!==64&&(w[f++]=g),y!==64&&(w[f++]=m);return w}},{"./support":30,"./utils":32}],2:[function(r,t,e){"use strict";var i=r("./external"),n=r("./stream/DataWorker"),s=r("./stream/Crc32Probe"),l=r("./stream/DataLengthProbe");function c(g,m,v,h,y){this.compressedSize=g,this.uncompressedSize=m,this.crc32=v,this.compression=h,this.compressedContent=y}c.prototype={getContentWorker:function(){var g=new n(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),m=this;return g.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),g},getCompressedWorker:function(){return new n(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(g,m,v){return g.pipe(new s).pipe(new l("uncompressedSize")).pipe(m.compressWorker(v)).pipe(new l("compressedSize")).withStreamInfo("compression",m)},t.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,t,e){"use strict";var i=r("./stream/GenericWorker");e.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},e.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,t,e){"use strict";var i=r("./utils"),n=function(){for(var s,l=[],c=0;c<256;c++){s=c;for(var g=0;g<8;g++)s=1&s?3988292384^s>>>1:s>>>1;l[c]=s}return l}();t.exports=function(s,l){return s!==void 0&&s.length?i.getTypeOf(s)!=="string"?function(c,g,m,v){var h=n,y=v+m;c^=-1;for(var u=v;u<y;u++)c=c>>>8^h[255&(c^g[u])];return-1^c}(0|l,s,s.length,0):function(c,g,m,v){var h=n,y=v+m;c^=-1;for(var u=v;u<y;u++)c=c>>>8^h[255&(c^g.charCodeAt(u))];return-1^c}(0|l,s,s.length,0):0}},{"./utils":32}],5:[function(r,t,e){"use strict";e.base64=!1,e.binary=!1,e.dir=!1,e.createFolders=!0,e.date=null,e.compression=null,e.compressionOptions=null,e.comment=null,e.unixPermissions=null,e.dosPermissions=null},{}],6:[function(r,t,e){"use strict";var i=null;i=typeof Promise!="undefined"?Promise:r("lie"),t.exports={Promise:i}},{lie:37}],7:[function(r,t,e){"use strict";var i=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",n=r("pako"),s=r("./utils"),l=r("./stream/GenericWorker"),c=i?"uint8array":"array";function g(m,v){l.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=v,this.meta={}}e.magic="\b\0",s.inherits(g,l),g.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(c,m.data),!1)},g.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},g.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},g.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(v){m.push({data:v,meta:m.meta})}},e.compressWorker=function(m){return new g("Deflate",m)},e.uncompressWorker=function(){return new g("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,t,e){"use strict";function i(h,y){var u,f="";for(u=0;u<y;u++)f+=String.fromCharCode(255&h),h>>>=8;return f}function n(h,y,u,f,d,w){var k,x,C=h.file,U=h.compression,R=w!==c.utf8encode,G=s.transformTo("string",w(C.name)),O=s.transformTo("string",c.utf8encode(C.name)),I=C.comment,J=s.transformTo("string",w(I)),_=s.transformTo("string",c.utf8encode(I)),z=O.length!==C.name.length,o=_.length!==I.length,P="",X="",B="",V=C.dir,M=C.date,Y={crc32:0,compressedSize:0,uncompressedSize:0};y&&!u||(Y.crc32=h.crc32,Y.compressedSize=h.compressedSize,Y.uncompressedSize=h.uncompressedSize);var T=0;y&&(T|=8),R||!z&&!o||(T|=2048);var A=0,q=0;V&&(A|=16),d==="UNIX"?(q=798,A|=function(H,nt){var ot=H;return H||(ot=nt?16893:33204),(65535&ot)<<16}(C.unixPermissions,V)):(q=20,A|=function(H){return 63&(H||0)}(C.dosPermissions)),k=M.getUTCHours(),k<<=6,k|=M.getUTCMinutes(),k<<=5,k|=M.getUTCSeconds()/2,x=M.getUTCFullYear()-1980,x<<=4,x|=M.getUTCMonth()+1,x<<=5,x|=M.getUTCDate(),z&&(X=i(1,1)+i(g(G),4)+O,P+="up"+i(X.length,2)+X),o&&(B=i(1,1)+i(g(J),4)+_,P+="uc"+i(B.length,2)+B);var Z="";return Z+=`
\0`,Z+=i(T,2),Z+=U.magic,Z+=i(k,2),Z+=i(x,2),Z+=i(Y.crc32,4),Z+=i(Y.compressedSize,4),Z+=i(Y.uncompressedSize,4),Z+=i(G.length,2),Z+=i(P.length,2),{fileRecord:m.LOCAL_FILE_HEADER+Z+G+P,dirRecord:m.CENTRAL_FILE_HEADER+i(q,2)+Z+i(J.length,2)+"\0\0\0\0"+i(A,4)+i(f,4)+G+P+J}}var s=r("../utils"),l=r("../stream/GenericWorker"),c=r("../utf8"),g=r("../crc32"),m=r("../signature");function v(h,y,u,f){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=u,this.encodeFileName=f,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(v,l),v.prototype.push=function(h){var y=h.meta.percent||0,u=this.entriesCount,f=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,l.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:u?(y+100*(u-f-1))/u:100}}))},v.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var y=this.streamFiles&&!h.file.dir;if(y){var u=n(h,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:u.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(h){this.accumulate=!1;var y=this.streamFiles&&!h.file.dir,u=n(h,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(u.dirRecord),y)this.push({data:function(f){return m.DATA_DESCRIPTOR+i(f.crc32,4)+i(f.compressedSize,4)+i(f.uncompressedSize,4)}(h),meta:{percent:100}});else for(this.push({data:u.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var h=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var u=this.bytesWritten-h,f=function(d,w,k,x,C){var U=s.transformTo("string",C(x));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(d,2)+i(d,2)+i(w,4)+i(k,4)+i(U.length,2)+U}(this.dirRecords.length,u,h,this.zipComment,this.encodeFileName);this.push({data:f,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(h){this._sources.push(h);var y=this;return h.on("data",function(u){y.processChunk(u)}),h.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),h.on("error",function(u){y.error(u)}),this},v.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(h){var y=this._sources;if(!l.prototype.error.call(this,h))return!1;for(var u=0;u<y.length;u++)try{y[u].error(h)}catch(f){}return!0},v.prototype.lock=function(){l.prototype.lock.call(this);for(var h=this._sources,y=0;y<h.length;y++)h[y].lock()},t.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,t,e){"use strict";var i=r("../compressions"),n=r("./ZipFileWorker");e.generateWorker=function(s,l,c){var g=new n(l.streamFiles,c,l.platform,l.encodeFileName),m=0;try{s.forEach(function(v,h){m++;var y=function(w,k){var x=w||k,C=i[x];if(!C)throw new Error(x+" is not a valid compression method !");return C}(h.options.compression,l.compression),u=h.options.compressionOptions||l.compressionOptions||{},f=h.dir,d=h.date;h._compressWorker(y,u).withStreamInfo("file",{name:v,dir:f,date:d,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(g)}),g.entriesCount=m}catch(v){g.error(v)}return g}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,t,e){"use strict";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var n=new i;for(var s in this)typeof this[s]!="function"&&(n[s]=this[s]);return n}}(i.prototype=r("./object")).loadAsync=r("./load"),i.support=r("./support"),i.defaults=r("./defaults"),i.version="3.10.1",i.loadAsync=function(n,s){return new i().loadAsync(n,s)},i.external=r("./external"),t.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,t,e){"use strict";var i=r("./utils"),n=r("./external"),s=r("./utf8"),l=r("./zipEntries"),c=r("./stream/Crc32Probe"),g=r("./nodejsUtils");function m(v){return new n.Promise(function(h,y){var u=v.decompressed.getContentWorker().pipe(new c);u.on("error",function(f){y(f)}).on("end",function(){u.streamInfo.crc32!==v.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}t.exports=function(v,h){var y=this;return h=i.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),g.isNode&&g.isStream(v)?n.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",v,!0,h.optimizedBinaryString,h.base64).then(function(u){var f=new l(h);return f.load(u),f}).then(function(u){var f=[n.Promise.resolve(u)],d=u.files;if(h.checkCRC32)for(var w=0;w<d.length;w++)f.push(m(d[w]));return n.Promise.all(f)}).then(function(u){for(var f=u.shift(),d=f.files,w=0;w<d.length;w++){var k=d[w],x=k.fileNameStr,C=i.resolve(k.fileNameStr);y.file(C,k.decompressed,{binary:!0,optimizedBinaryString:!0,date:k.date,dir:k.dir,comment:k.fileCommentStr.length?k.fileCommentStr:null,unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions,createFolders:h.createFolders}),k.dir||(y.file(C).unsafeOriginalName=x)}return f.zipComment.length&&(y.comment=f.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,t,e){"use strict";var i=r("../utils"),n=r("../stream/GenericWorker");function s(l,c){n.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(s,n),s.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(g){c.push({data:g,meta:{percent:0}})}).on("error",function(g){c.isPaused?this.generatedError=g:c.error(g)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},s.prototype.pause=function(){return!!n.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,t,e){"use strict";var i=r("readable-stream").Readable;function n(s,l,c){i.call(this,l),this._helper=s;var g=this;s.on("data",function(m,v){g.push(m)||g._helper.pause(),c&&c(v)}).on("error",function(m){g.emit("error",m)}).on("end",function(){g.push(null)})}r("../utils").inherits(n,i),n.prototype._read=function(){this._helper.resume()},t.exports=n},{"../utils":32,"readable-stream":16}],14:[function(r,t,e){"use strict";t.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(i,n){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,n);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,n)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var n=new Buffer(i);return n.fill(0),n},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(r,t,e){"use strict";function i(C,U,R){var G,O=s.getTypeOf(U),I=s.extend(R||{},g);I.date=I.date||new Date,I.compression!==null&&(I.compression=I.compression.toUpperCase()),typeof I.unixPermissions=="string"&&(I.unixPermissions=parseInt(I.unixPermissions,8)),I.unixPermissions&&16384&I.unixPermissions&&(I.dir=!0),I.dosPermissions&&16&I.dosPermissions&&(I.dir=!0),I.dir&&(C=d(C)),I.createFolders&&(G=f(C))&&w.call(this,G,!0);var J=O==="string"&&I.binary===!1&&I.base64===!1;R&&R.binary!==void 0||(I.binary=!J),(U instanceof m&&U.uncompressedSize===0||I.dir||!U||U.length===0)&&(I.base64=!1,I.binary=!0,U="",I.compression="STORE",O="string");var _=null;_=U instanceof m||U instanceof l?U:y.isNode&&y.isStream(U)?new u(C,U):s.prepareContent(C,U,I.binary,I.optimizedBinaryString,I.base64);var z=new v(C,_,I);this.files[C]=z}var n=r("./utf8"),s=r("./utils"),l=r("./stream/GenericWorker"),c=r("./stream/StreamHelper"),g=r("./defaults"),m=r("./compressedObject"),v=r("./zipObject"),h=r("./generate"),y=r("./nodejsUtils"),u=r("./nodejs/NodejsStreamInputAdapter"),f=function(C){C.slice(-1)==="/"&&(C=C.substring(0,C.length-1));var U=C.lastIndexOf("/");return 0<U?C.substring(0,U):""},d=function(C){return C.slice(-1)!=="/"&&(C+="/"),C},w=function(C,U){return U=U!==void 0?U:g.createFolders,C=d(C),this.files[C]||i.call(this,C,null,{dir:!0,createFolders:U}),this.files[C]};function k(C){return Object.prototype.toString.call(C)==="[object RegExp]"}var x={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(C){var U,R,G;for(U in this.files)G=this.files[U],(R=U.slice(this.root.length,U.length))&&U.slice(0,this.root.length)===this.root&&C(R,G)},filter:function(C){var U=[];return this.forEach(function(R,G){C(R,G)&&U.push(G)}),U},file:function(C,U,R){if(arguments.length!==1)return C=this.root+C,i.call(this,C,U,R),this;if(k(C)){var G=C;return this.filter(function(I,J){return!J.dir&&G.test(I)})}var O=this.files[this.root+C];return O&&!O.dir?O:null},folder:function(C){if(!C)return this;if(k(C))return this.filter(function(O,I){return I.dir&&C.test(O)});var U=this.root+C,R=w.call(this,U),G=this.clone();return G.root=R.name,G},remove:function(C){C=this.root+C;var U=this.files[C];if(U||(C.slice(-1)!=="/"&&(C+="/"),U=this.files[C]),U&&!U.dir)delete this.files[C];else for(var R=this.filter(function(O,I){return I.name.slice(0,C.length)===C}),G=0;G<R.length;G++)delete this.files[R[G].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(C){var U,R={};try{if((R=s.extend(C||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");s.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var G=R.comment||this.comment||"";U=h.generateWorker(this,R,G)}catch(O){(U=new l("error")).error(O)}return new c(U,R.type||"string",R.mimeType)},generateAsync:function(C,U){return this.generateInternalStream(C).accumulate(U)},generateNodeStream:function(C,U){return(C=C||{}).type||(C.type="nodebuffer"),this.generateInternalStream(C).toNodejsStream(U)}};t.exports=x},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,t,e){"use strict";t.exports=r("stream")},{stream:void 0}],17:[function(r,t,e){"use strict";var i=r("./DataReader");function n(s){i.call(this,s);for(var l=0;l<this.data.length;l++)s[l]=255&s[l]}r("../utils").inherits(n,i),n.prototype.byteAt=function(s){return this.data[this.zero+s]},n.prototype.lastIndexOfSignature=function(s){for(var l=s.charCodeAt(0),c=s.charCodeAt(1),g=s.charCodeAt(2),m=s.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===l&&this.data[v+1]===c&&this.data[v+2]===g&&this.data[v+3]===m)return v-this.zero;return-1},n.prototype.readAndCheckSignature=function(s){var l=s.charCodeAt(0),c=s.charCodeAt(1),g=s.charCodeAt(2),m=s.charCodeAt(3),v=this.readData(4);return l===v[0]&&c===v[1]&&g===v[2]&&m===v[3]},n.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},t.exports=n},{"../utils":32,"./DataReader":18}],18:[function(r,t,e){"use strict";var i=r("../utils");function n(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}n.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var l,c=0;for(this.checkOffset(s),l=this.index+s-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=s,c},readString:function(s){return i.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},t.exports=n},{"../utils":32}],19:[function(r,t,e){"use strict";var i=r("./Uint8ArrayReader");function n(s){i.call(this,s)}r("../utils").inherits(n,i),n.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},t.exports=n},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,t,e){"use strict";var i=r("./DataReader");function n(s){i.call(this,s)}r("../utils").inherits(n,i),n.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},n.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},n.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},n.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},t.exports=n},{"../utils":32,"./DataReader":18}],21:[function(r,t,e){"use strict";var i=r("./ArrayReader");function n(s){i.call(this,s)}r("../utils").inherits(n,i),n.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},t.exports=n},{"../utils":32,"./ArrayReader":17}],22:[function(r,t,e){"use strict";var i=r("../utils"),n=r("../support"),s=r("./ArrayReader"),l=r("./StringReader"),c=r("./NodeBufferReader"),g=r("./Uint8ArrayReader");t.exports=function(m){var v=i.getTypeOf(m);return i.checkSupport(v),v!=="string"||n.uint8array?v==="nodebuffer"?new c(m):n.uint8array?new g(i.transformTo("uint8array",m)):new s(i.transformTo("array",m)):new l(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,t,e){"use strict";e.LOCAL_FILE_HEADER="PK",e.CENTRAL_FILE_HEADER="PK",e.CENTRAL_DIRECTORY_END="PK",e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",e.ZIP64_CENTRAL_DIRECTORY_END="PK",e.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,t,e){"use strict";var i=r("./GenericWorker"),n=r("../utils");function s(l){i.call(this,"ConvertWorker to "+l),this.destType=l}n.inherits(s,i),s.prototype.processChunk=function(l){this.push({data:n.transformTo(this.destType,l.data),meta:l.meta})},t.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(r,t,e){"use strict";var i=r("./GenericWorker"),n=r("../crc32");function s(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(s,i),s.prototype.processChunk=function(l){this.streamInfo.crc32=n(l.data,this.streamInfo.crc32||0),this.push(l)},t.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,t,e){"use strict";var i=r("../utils"),n=r("./GenericWorker");function s(l){n.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(s,n),s.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}n.prototype.processChunk.call(this,l)},t.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(r,t,e){"use strict";var i=r("../utils"),n=r("./GenericWorker");function s(l){n.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(g){c.dataIsReady=!0,c.data=g,c.max=g&&g.length||0,c.type=i.getTypeOf(g),c.isPaused||c._tickAndRepeat()},function(g){c.error(g)})}i.inherits(s,n),s.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(r,t,e){"use strict";function i(n){this.name=n||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(n){this.emit("data",n)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(n){this.emit("error",n)}return!0},error:function(n){return!this.isFinished&&(this.isPaused?this.generatedError=n:(this.isFinished=!0,this.emit("error",n),this.previous&&this.previous.error(n),this.cleanUp()),!0)},on:function(n,s){return this._listeners[n].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(n,s){if(this._listeners[n])for(var l=0;l<this._listeners[n].length;l++)this._listeners[n][l].call(this,s)},pipe:function(n){return n.registerPrevious(this)},registerPrevious:function(n){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=n.streamInfo,this.mergeStreamInfo(),this.previous=n;var s=this;return n.on("data",function(l){s.processChunk(l)}),n.on("end",function(){s.end()}),n.on("error",function(l){s.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var n=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),n=!0),this.previous&&this.previous.resume(),!n},flush:function(){},processChunk:function(n){this.push(n)},withStreamInfo:function(n,s){return this.extraStreamInfo[n]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var n in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,n)&&(this.streamInfo[n]=this.extraStreamInfo[n])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var n="Worker "+this.name;return this.previous?this.previous+" -> "+n:n}},t.exports=i},{}],29:[function(r,t,e){"use strict";var i=r("../utils"),n=r("./ConvertWorker"),s=r("./GenericWorker"),l=r("../base64"),c=r("../support"),g=r("../external"),m=null;if(c.nodestream)try{m=r("../nodejs/NodejsStreamOutputAdapter")}catch(y){}function v(y,u){return new g.Promise(function(f,d){var w=[],k=y._internalType,x=y._outputType,C=y._mimeType;y.on("data",function(U,R){w.push(U),u&&u(R)}).on("error",function(U){w=[],d(U)}).on("end",function(){try{var U=function(R,G,O){switch(R){case"blob":return i.newBlob(i.transformTo("arraybuffer",G),O);case"base64":return l.encode(G);default:return i.transformTo(R,G)}}(x,function(R,G){var O,I=0,J=null,_=0;for(O=0;O<G.length;O++)_+=G[O].length;switch(R){case"string":return G.join("");case"array":return Array.prototype.concat.apply([],G);case"uint8array":for(J=new Uint8Array(_),O=0;O<G.length;O++)J.set(G[O],I),I+=G[O].length;return J;case"nodebuffer":return Buffer.concat(G);default:throw new Error("concat : unsupported type '"+R+"'")}}(k,w),C);f(U)}catch(R){d(R)}w=[]}).resume()})}function h(y,u,f){var d=u;switch(u){case"blob":case"arraybuffer":d="uint8array";break;case"base64":d="string"}try{this._internalType=d,this._outputType=u,this._mimeType=f,i.checkSupport(d),this._worker=y.pipe(new n(d)),y.lock()}catch(w){this._worker=new s("error"),this._worker.error(w)}}h.prototype={accumulate:function(y){return v(this,y)},on:function(y,u){var f=this;return y==="data"?this._worker.on(y,function(d){u.call(f,d.data,d.meta)}):this._worker.on(y,function(){i.delay(u,arguments,f)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},y)}},t.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,t,e){"use strict";if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",e.nodebuffer=typeof Buffer!="undefined",e.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")e.blob=!1;else{var i=new ArrayBuffer(0);try{e.blob=new Blob([i],{type:"application/zip"}).size===0}catch(s){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);n.append(i),e.blob=n.getBlob("application/zip").size===0}catch(l){e.blob=!1}}}try{e.nodestream=!!r("readable-stream").Readable}catch(s){e.nodestream=!1}},{"readable-stream":16}],31:[function(r,t,e){"use strict";for(var i=r("./utils"),n=r("./support"),s=r("./nodejsUtils"),l=r("./stream/GenericWorker"),c=new Array(256),g=0;g<256;g++)c[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;c[254]=c[254]=1;function m(){l.call(this,"utf-8 decode"),this.leftOver=null}function v(){l.call(this,"utf-8 encode")}e.utf8encode=function(h){return n.nodebuffer?s.newBufferFrom(h,"utf-8"):function(y){var u,f,d,w,k,x=y.length,C=0;for(w=0;w<x;w++)(64512&(f=y.charCodeAt(w)))==55296&&w+1<x&&(64512&(d=y.charCodeAt(w+1)))==56320&&(f=65536+(f-55296<<10)+(d-56320),w++),C+=f<128?1:f<2048?2:f<65536?3:4;for(u=n.uint8array?new Uint8Array(C):new Array(C),w=k=0;k<C;w++)(64512&(f=y.charCodeAt(w)))==55296&&w+1<x&&(64512&(d=y.charCodeAt(w+1)))==56320&&(f=65536+(f-55296<<10)+(d-56320),w++),f<128?u[k++]=f:(f<2048?u[k++]=192|f>>>6:(f<65536?u[k++]=224|f>>>12:(u[k++]=240|f>>>18,u[k++]=128|f>>>12&63),u[k++]=128|f>>>6&63),u[k++]=128|63&f);return u}(h)},e.utf8decode=function(h){return n.nodebuffer?i.transformTo("nodebuffer",h).toString("utf-8"):function(y){var u,f,d,w,k=y.length,x=new Array(2*k);for(u=f=0;u<k;)if((d=y[u++])<128)x[f++]=d;else if(4<(w=c[d]))x[f++]=65533,u+=w-1;else{for(d&=w===2?31:w===3?15:7;1<w&&u<k;)d=d<<6|63&y[u++],w--;1<w?x[f++]=65533:d<65536?x[f++]=d:(d-=65536,x[f++]=55296|d>>10&1023,x[f++]=56320|1023&d)}return x.length!==f&&(x.subarray?x=x.subarray(0,f):x.length=f),i.applyFromCharCode(x)}(h=i.transformTo(n.uint8array?"uint8array":"array",h))},i.inherits(m,l),m.prototype.processChunk=function(h){var y=i.transformTo(n.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(n.uint8array){var u=y;(y=new Uint8Array(u.length+this.leftOver.length)).set(this.leftOver,0),y.set(u,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var f=function(w,k){var x;for((k=k||w.length)>w.length&&(k=w.length),x=k-1;0<=x&&(192&w[x])==128;)x--;return x<0||x===0?k:x+c[w[x]]>k?x:k}(y),d=y;f!==y.length&&(n.uint8array?(d=y.subarray(0,f),this.leftOver=y.subarray(f,y.length)):(d=y.slice(0,f),this.leftOver=y.slice(f,y.length))),this.push({data:e.utf8decode(d),meta:h.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},e.Utf8DecodeWorker=m,i.inherits(v,l),v.prototype.processChunk=function(h){this.push({data:e.utf8encode(h.data),meta:h.meta})},e.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,t,e){"use strict";var i=r("./support"),n=r("./base64"),s=r("./nodejsUtils"),l=r("./external");function c(u){return u}function g(u,f){for(var d=0;d<u.length;++d)f[d]=255&u.charCodeAt(d);return f}r("setimmediate"),e.newBlob=function(u,f){e.checkSupport("blob");try{return new Blob([u],{type:f})}catch(w){try{var d=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return d.append(u),d.getBlob(f)}catch(k){throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(u,f,d){var w=[],k=0,x=u.length;if(x<=d)return String.fromCharCode.apply(null,u);for(;k<x;)f==="array"||f==="nodebuffer"?w.push(String.fromCharCode.apply(null,u.slice(k,Math.min(k+d,x)))):w.push(String.fromCharCode.apply(null,u.subarray(k,Math.min(k+d,x)))),k+=d;return w.join("")},stringifyByChar:function(u){for(var f="",d=0;d<u.length;d++)f+=String.fromCharCode(u[d]);return f},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(u){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch(u){return!1}}()}};function v(u){var f=65536,d=e.getTypeOf(u),w=!0;if(d==="uint8array"?w=m.applyCanBeUsed.uint8array:d==="nodebuffer"&&(w=m.applyCanBeUsed.nodebuffer),w)for(;1<f;)try{return m.stringifyByChunk(u,d,f)}catch(k){f=Math.floor(f/2)}return m.stringifyByChar(u)}function h(u,f){for(var d=0;d<u.length;d++)f[d]=u[d];return f}e.applyFromCharCode=v;var y={};y.string={string:c,array:function(u){return g(u,new Array(u.length))},arraybuffer:function(u){return y.string.uint8array(u).buffer},uint8array:function(u){return g(u,new Uint8Array(u.length))},nodebuffer:function(u){return g(u,s.allocBuffer(u.length))}},y.array={string:v,array:c,arraybuffer:function(u){return new Uint8Array(u).buffer},uint8array:function(u){return new Uint8Array(u)},nodebuffer:function(u){return s.newBufferFrom(u)}},y.arraybuffer={string:function(u){return v(new Uint8Array(u))},array:function(u){return h(new Uint8Array(u),new Array(u.byteLength))},arraybuffer:c,uint8array:function(u){return new Uint8Array(u)},nodebuffer:function(u){return s.newBufferFrom(new Uint8Array(u))}},y.uint8array={string:v,array:function(u){return h(u,new Array(u.length))},arraybuffer:function(u){return u.buffer},uint8array:c,nodebuffer:function(u){return s.newBufferFrom(u)}},y.nodebuffer={string:v,array:function(u){return h(u,new Array(u.length))},arraybuffer:function(u){return y.nodebuffer.uint8array(u).buffer},uint8array:function(u){return h(u,new Uint8Array(u.length))},nodebuffer:c},e.transformTo=function(u,f){if(f=f||"",!u)return f;e.checkSupport(u);var d=e.getTypeOf(f);return y[d][u](f)},e.resolve=function(u){for(var f=u.split("/"),d=[],w=0;w<f.length;w++){var k=f[w];k==="."||k===""&&w!==0&&w!==f.length-1||(k===".."?d.pop():d.push(k))}return d.join("/")},e.getTypeOf=function(u){return typeof u=="string"?"string":Object.prototype.toString.call(u)==="[object Array]"?"array":i.nodebuffer&&s.isBuffer(u)?"nodebuffer":i.uint8array&&u instanceof Uint8Array?"uint8array":i.arraybuffer&&u instanceof ArrayBuffer?"arraybuffer":void 0},e.checkSupport=function(u){if(!i[u.toLowerCase()])throw new Error(u+" is not supported by this platform")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(u){var f,d,w="";for(d=0;d<(u||"").length;d++)w+="\\x"+((f=u.charCodeAt(d))<16?"0":"")+f.toString(16).toUpperCase();return w},e.delay=function(u,f,d){setImmediate(function(){u.apply(d||null,f||[])})},e.inherits=function(u,f){function d(){}d.prototype=f.prototype,u.prototype=new d},e.extend=function(){var u,f,d={};for(u=0;u<arguments.length;u++)for(f in arguments[u])Object.prototype.hasOwnProperty.call(arguments[u],f)&&d[f]===void 0&&(d[f]=arguments[u][f]);return d},e.prepareContent=function(u,f,d,w,k){return l.Promise.resolve(f).then(function(x){return i.blob&&(x instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(x))!==-1)&&typeof FileReader!="undefined"?new l.Promise(function(C,U){var R=new FileReader;R.onload=function(G){C(G.target.result)},R.onerror=function(G){U(G.target.error)},R.readAsArrayBuffer(x)}):x}).then(function(x){var C=e.getTypeOf(x);return C?(C==="arraybuffer"?x=e.transformTo("uint8array",x):C==="string"&&(k?x=n.decode(x):d&&w!==!0&&(x=function(U){return g(U,i.uint8array?new Uint8Array(U.length):new Array(U.length))}(x))),x):l.Promise.reject(new Error("Can't read the data of '"+u+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,t,e){"use strict";var i=r("./reader/readerFor"),n=r("./utils"),s=r("./signature"),l=r("./zipEntry"),c=r("./support");function g(m){this.files=[],this.loadOptions=m}g.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+n.pretty(v)+", expected "+n.pretty(m)+")")}},isSignature:function(m,v){var h=this.reader.index;this.reader.setIndex(m);var y=this.reader.readString(4)===v;return this.reader.setIndex(h),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),v=c.uint8array?"uint8array":"array",h=n.transformTo(v,m);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,v,h,y=this.zip64EndOfCentralSize-44;0<y;)m=this.reader.readInt(2),v=this.reader.readInt(4),h=this.reader.readData(v),this.zip64ExtensibleData[m]={id:m,length:v,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,v;for(m=0;m<this.files.length;m++)v=this.files[m],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(m=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var v=m;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===n.MAX_VALUE_16BITS||this.diskWithCentralDirStart===n.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===n.MAX_VALUE_16BITS||this.centralDirRecords===n.MAX_VALUE_16BITS||this.centralDirSize===n.MAX_VALUE_32BITS||this.centralDirOffset===n.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var y=v-h;if(0<y)this.isSignature(v,s.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(m){this.reader=i(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=g},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,t,e){"use strict";var i=r("./reader/readerFor"),n=r("./utils"),s=r("./compressedObject"),l=r("./crc32"),c=r("./utf8"),g=r("./compressions"),m=r("./support");function v(h,y){this.options=h,this.loadOptions=y}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var y,u;if(h.skip(22),this.fileNameLength=h.readInt(2),u=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(u),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(f){for(var d in g)if(Object.prototype.hasOwnProperty.call(g,d)&&g[d].magic===f)return g[d];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+n.pretty(this.compressionMethod)+" unknown (inner file : "+n.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,y,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var y=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(y),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=i(this.extraFields[1].value);this.uncompressedSize===n.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===n.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===n.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===n.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var y,u,f,d=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<d;)y=h.readInt(2),u=h.readInt(2),f=h.readData(u),this.extraFields[y]={id:y,length:u,value:f};h.setIndex(d)},handleUTF8:function(){var h=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var u=n.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(u)}var f=this.findExtraFieldUnicodeComment();if(f!==null)this.fileCommentStr=f;else{var d=n.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(d)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var y=i(h.value);return y.readInt(1)!==1||l(this.fileName)!==y.readInt(4)?null:c.utf8decode(y.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var y=i(h.value);return y.readInt(1)!==1||l(this.fileComment)!==y.readInt(4)?null:c.utf8decode(y.readData(h.length-5))}return null}},t.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,t,e){"use strict";function i(y,u,f){this.name=y,this.dir=f.dir,this.date=f.date,this.comment=f.comment,this.unixPermissions=f.unixPermissions,this.dosPermissions=f.dosPermissions,this._data=u,this._dataBinary=f.binary,this.options={compression:f.compression,compressionOptions:f.compressionOptions}}var n=r("./stream/StreamHelper"),s=r("./stream/DataWorker"),l=r("./utf8"),c=r("./compressedObject"),g=r("./stream/GenericWorker");i.prototype={internalStream:function(y){var u=null,f="string";try{if(!y)throw new Error("No output type specified.");var d=(f=y.toLowerCase())==="string"||f==="text";f!=="binarystring"&&f!=="text"||(f="string"),u=this._decompressWorker();var w=!this._dataBinary;w&&!d&&(u=u.pipe(new l.Utf8EncodeWorker)),!w&&d&&(u=u.pipe(new l.Utf8DecodeWorker))}catch(k){(u=new g("error")).error(k)}return new n(u,f,"")},async:function(y,u){return this.internalStream(y).accumulate(u)},nodeStream:function(y,u){return this.internalStream(y||"nodebuffer").toNodejsStream(u)},_compressWorker:function(y,u){if(this._data instanceof c&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var f=this._decompressWorker();return this._dataBinary||(f=f.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(f,y,u)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof g?this._data:new s(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<m.length;h++)i.prototype[m[h]]=v;t.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,t,e){(function(i){"use strict";var n,s,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var c=0,g=new l(y),m=i.document.createTextNode("");g.observe(m,{characterData:!0}),n=function(){m.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)n="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var u=i.document.createElement("script");u.onreadystatechange=function(){y(),u.onreadystatechange=null,u.parentNode.removeChild(u),u=null},i.document.documentElement.appendChild(u)}:function(){setTimeout(y,0)};else{var v=new i.MessageChannel;v.port1.onmessage=y,n=function(){v.port2.postMessage(0)}}var h=[];function y(){var u,f;s=!0;for(var d=h.length;d;){for(f=h,h=[],u=-1;++u<d;)f[u]();d=h.length}s=!1}t.exports=function(u){h.push(u)!==1||s||n()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function(r,t,e){"use strict";var i=r("immediate");function n(){}var s={},l=["REJECTED"],c=["FULFILLED"],g=["PENDING"];function m(d){if(typeof d!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,d!==n&&u(this,d)}function v(d,w,k){this.promise=d,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}function h(d,w,k){i(function(){var x;try{x=w(k)}catch(C){return s.reject(d,C)}x===d?s.reject(d,new TypeError("Cannot resolve promise with itself")):s.resolve(d,x)})}function y(d){var w=d&&d.then;if(d&&(typeof d=="object"||typeof d=="function")&&typeof w=="function")return function(){w.apply(d,arguments)}}function u(d,w){var k=!1;function x(R){k||(k=!0,s.reject(d,R))}function C(R){k||(k=!0,s.resolve(d,R))}var U=f(function(){w(C,x)});U.status==="error"&&x(U.value)}function f(d,w){var k={};try{k.value=d(w),k.status="success"}catch(x){k.status="error",k.value=x}return k}(t.exports=m).prototype.finally=function(d){if(typeof d!="function")return this;var w=this.constructor;return this.then(function(k){return w.resolve(d()).then(function(){return k})},function(k){return w.resolve(d()).then(function(){throw k})})},m.prototype.catch=function(d){return this.then(null,d)},m.prototype.then=function(d,w){if(typeof d!="function"&&this.state===c||typeof w!="function"&&this.state===l)return this;var k=new this.constructor(n);return this.state!==g?h(k,this.state===c?d:w,this.outcome):this.queue.push(new v(k,d,w)),k},v.prototype.callFulfilled=function(d){s.resolve(this.promise,d)},v.prototype.otherCallFulfilled=function(d){h(this.promise,this.onFulfilled,d)},v.prototype.callRejected=function(d){s.reject(this.promise,d)},v.prototype.otherCallRejected=function(d){h(this.promise,this.onRejected,d)},s.resolve=function(d,w){var k=f(y,w);if(k.status==="error")return s.reject(d,k.value);var x=k.value;if(x)u(d,x);else{d.state=c,d.outcome=w;for(var C=-1,U=d.queue.length;++C<U;)d.queue[C].callFulfilled(w)}return d},s.reject=function(d,w){d.state=l,d.outcome=w;for(var k=-1,x=d.queue.length;++k<x;)d.queue[k].callRejected(w);return d},m.resolve=function(d){return d instanceof this?d:s.resolve(new this(n),d)},m.reject=function(d){var w=new this(n);return s.reject(w,d)},m.all=function(d){var w=this;if(Object.prototype.toString.call(d)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=d.length,x=!1;if(!k)return this.resolve([]);for(var C=new Array(k),U=0,R=-1,G=new this(n);++R<k;)O(d[R],R);return G;function O(I,J){w.resolve(I).then(function(_){C[J]=_,++U!==k||x||(x=!0,s.resolve(G,C))},function(_){x||(x=!0,s.reject(G,_))})}},m.race=function(d){var w=this;if(Object.prototype.toString.call(d)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=d.length,x=!1;if(!k)return this.resolve([]);for(var C=-1,U=new this(n);++C<k;)R=d[C],w.resolve(R).then(function(G){x||(x=!0,s.resolve(U,G))},function(G){x||(x=!0,s.reject(U,G))});var R;return U}},{immediate:36}],38:[function(r,t,e){"use strict";var i={};(0,r("./lib/utils/common").assign)(i,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),t.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,t,e){"use strict";var i=r("./zlib/deflate"),n=r("./utils/common"),s=r("./utils/strings"),l=r("./zlib/messages"),c=r("./zlib/zstream"),g=Object.prototype.toString,m=0,v=-1,h=0,y=8;function u(d){if(!(this instanceof u))return new u(d);this.options=n.assign({level:v,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},d||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var k=i.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(k!==m)throw new Error(l[k]);if(w.header&&i.deflateSetHeader(this.strm,w.header),w.dictionary){var x;if(x=typeof w.dictionary=="string"?s.string2buf(w.dictionary):g.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(k=i.deflateSetDictionary(this.strm,x))!==m)throw new Error(l[k]);this._dict_set=!0}}function f(d,w){var k=new u(w);if(k.push(d,!0),k.err)throw k.msg||l[k.err];return k.result}u.prototype.push=function(d,w){var k,x,C=this.strm,U=this.options.chunkSize;if(this.ended)return!1;x=w===~~w?w:w===!0?4:0,typeof d=="string"?C.input=s.string2buf(d):g.call(d)==="[object ArrayBuffer]"?C.input=new Uint8Array(d):C.input=d,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new n.Buf8(U),C.next_out=0,C.avail_out=U),(k=i.deflate(C,x))!==1&&k!==m)return this.onEnd(k),!(this.ended=!0);C.avail_out!==0&&(C.avail_in!==0||x!==4&&x!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(n.shrinkBuf(C.output,C.next_out))):this.onData(n.shrinkBuf(C.output,C.next_out)))}while((0<C.avail_in||C.avail_out===0)&&k!==1);return x===4?(k=i.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===m):x!==2||(this.onEnd(m),!(C.avail_out=0))},u.prototype.onData=function(d){this.chunks.push(d)},u.prototype.onEnd=function(d){d===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg},e.Deflate=u,e.deflate=f,e.deflateRaw=function(d,w){return(w=w||{}).raw=!0,f(d,w)},e.gzip=function(d,w){return(w=w||{}).gzip=!0,f(d,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,t,e){"use strict";var i=r("./zlib/inflate"),n=r("./utils/common"),s=r("./utils/strings"),l=r("./zlib/constants"),c=r("./zlib/messages"),g=r("./zlib/zstream"),m=r("./zlib/gzheader"),v=Object.prototype.toString;function h(u){if(!(this instanceof h))return new h(u);this.options=n.assign({chunkSize:16384,windowBits:0,to:""},u||{});var f=this.options;f.raw&&0<=f.windowBits&&f.windowBits<16&&(f.windowBits=-f.windowBits,f.windowBits===0&&(f.windowBits=-15)),!(0<=f.windowBits&&f.windowBits<16)||u&&u.windowBits||(f.windowBits+=32),15<f.windowBits&&f.windowBits<48&&!(15&f.windowBits)&&(f.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var d=i.inflateInit2(this.strm,f.windowBits);if(d!==l.Z_OK)throw new Error(c[d]);this.header=new m,i.inflateGetHeader(this.strm,this.header)}function y(u,f){var d=new h(f);if(d.push(u,!0),d.err)throw d.msg||c[d.err];return d.result}h.prototype.push=function(u,f){var d,w,k,x,C,U,R=this.strm,G=this.options.chunkSize,O=this.options.dictionary,I=!1;if(this.ended)return!1;w=f===~~f?f:f===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof u=="string"?R.input=s.binstring2buf(u):v.call(u)==="[object ArrayBuffer]"?R.input=new Uint8Array(u):R.input=u,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new n.Buf8(G),R.next_out=0,R.avail_out=G),(d=i.inflate(R,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&O&&(U=typeof O=="string"?s.string2buf(O):v.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,d=i.inflateSetDictionary(this.strm,U)),d===l.Z_BUF_ERROR&&I===!0&&(d=l.Z_OK,I=!1),d!==l.Z_STREAM_END&&d!==l.Z_OK)return this.onEnd(d),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&d!==l.Z_STREAM_END&&(R.avail_in!==0||w!==l.Z_FINISH&&w!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(k=s.utf8border(R.output,R.next_out),x=R.next_out-k,C=s.buf2string(R.output,k),R.next_out=x,R.avail_out=G-x,x&&n.arraySet(R.output,R.output,k,x,0),this.onData(C)):this.onData(n.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(I=!0)}while((0<R.avail_in||R.avail_out===0)&&d!==l.Z_STREAM_END);return d===l.Z_STREAM_END&&(w=l.Z_FINISH),w===l.Z_FINISH?(d=i.inflateEnd(this.strm),this.onEnd(d),this.ended=!0,d===l.Z_OK):w!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(R.avail_out=0))},h.prototype.onData=function(u){this.chunks.push(u)},h.prototype.onEnd=function(u){u===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=u,this.msg=this.strm.msg},e.Inflate=h,e.inflate=y,e.inflateRaw=function(u,f){return(f=f||{}).raw=!0,y(u,f)},e.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,t,e){"use strict";var i=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";e.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var g=c.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(var m in g)g.hasOwnProperty(m)&&(l[m]=g[m])}}return l},e.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var n={arraySet:function(l,c,g,m,v){if(c.subarray&&l.subarray)l.set(c.subarray(g,g+m),v);else for(var h=0;h<m;h++)l[v+h]=c[g+h]},flattenChunks:function(l){var c,g,m,v,h,y;for(c=m=0,g=l.length;c<g;c++)m+=l[c].length;for(y=new Uint8Array(m),c=v=0,g=l.length;c<g;c++)h=l[c],y.set(h,v),v+=h.length;return y}},s={arraySet:function(l,c,g,m,v){for(var h=0;h<m;h++)l[v+h]=c[g+h]},flattenChunks:function(l){return[].concat.apply([],l)}};e.setTyped=function(l){l?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,s))},e.setTyped(i)},{}],42:[function(r,t,e){"use strict";var i=r("./common"),n=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(m){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(m){s=!1}for(var l=new i.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function g(m,v){if(v<65537&&(m.subarray&&s||!m.subarray&&n))return String.fromCharCode.apply(null,i.shrinkBuf(m,v));for(var h="",y=0;y<v;y++)h+=String.fromCharCode(m[y]);return h}l[254]=l[254]=1,e.string2buf=function(m){var v,h,y,u,f,d=m.length,w=0;for(u=0;u<d;u++)(64512&(h=m.charCodeAt(u)))==55296&&u+1<d&&(64512&(y=m.charCodeAt(u+1)))==56320&&(h=65536+(h-55296<<10)+(y-56320),u++),w+=h<128?1:h<2048?2:h<65536?3:4;for(v=new i.Buf8(w),u=f=0;f<w;u++)(64512&(h=m.charCodeAt(u)))==55296&&u+1<d&&(64512&(y=m.charCodeAt(u+1)))==56320&&(h=65536+(h-55296<<10)+(y-56320),u++),h<128?v[f++]=h:(h<2048?v[f++]=192|h>>>6:(h<65536?v[f++]=224|h>>>12:(v[f++]=240|h>>>18,v[f++]=128|h>>>12&63),v[f++]=128|h>>>6&63),v[f++]=128|63&h);return v},e.buf2binstring=function(m){return g(m,m.length)},e.binstring2buf=function(m){for(var v=new i.Buf8(m.length),h=0,y=v.length;h<y;h++)v[h]=m.charCodeAt(h);return v},e.buf2string=function(m,v){var h,y,u,f,d=v||m.length,w=new Array(2*d);for(h=y=0;h<d;)if((u=m[h++])<128)w[y++]=u;else if(4<(f=l[u]))w[y++]=65533,h+=f-1;else{for(u&=f===2?31:f===3?15:7;1<f&&h<d;)u=u<<6|63&m[h++],f--;1<f?w[y++]=65533:u<65536?w[y++]=u:(u-=65536,w[y++]=55296|u>>10&1023,w[y++]=56320|1023&u)}return g(w,y)},e.utf8border=function(m,v){var h;for((v=v||m.length)>m.length&&(v=m.length),h=v-1;0<=h&&(192&m[h])==128;)h--;return h<0||h===0?v:h+l[m[h]]>v?h:v}},{"./common":41}],43:[function(r,t,e){"use strict";t.exports=function(i,n,s,l){for(var c=65535&i|0,g=i>>>16&65535|0,m=0;s!==0;){for(s-=m=2e3<s?2e3:s;g=g+(c=c+n[l++]|0)|0,--m;);c%=65521,g%=65521}return c|g<<16|0}},{}],44:[function(r,t,e){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,t,e){"use strict";var i=function(){for(var n,s=[],l=0;l<256;l++){n=l;for(var c=0;c<8;c++)n=1&n?3988292384^n>>>1:n>>>1;s[l]=n}return s}();t.exports=function(n,s,l,c){var g=i,m=c+l;n^=-1;for(var v=c;v<m;v++)n=n>>>8^g[255&(n^s[v])];return-1^n}},{}],46:[function(r,t,e){"use strict";var i,n=r("../utils/common"),s=r("./trees"),l=r("./adler32"),c=r("./crc32"),g=r("./messages"),m=0,v=4,h=0,y=-2,u=-1,f=4,d=2,w=8,k=9,x=286,C=30,U=19,R=2*x+1,G=15,O=3,I=258,J=I+O+1,_=42,z=113,o=1,P=2,X=3,B=4;function V(a,L){return a.msg=g[L],L}function M(a){return(a<<1)-(4<a?9:0)}function Y(a){for(var L=a.length;0<=--L;)a[L]=0}function T(a){var L=a.state,D=L.pending;D>a.avail_out&&(D=a.avail_out),D!==0&&(n.arraySet(a.output,L.pending_buf,L.pending_out,D,a.next_out),a.next_out+=D,L.pending_out+=D,a.total_out+=D,a.avail_out-=D,L.pending-=D,L.pending===0&&(L.pending_out=0))}function A(a,L){s._tr_flush_block(a,0<=a.block_start?a.block_start:-1,a.strstart-a.block_start,L),a.block_start=a.strstart,T(a.strm)}function q(a,L){a.pending_buf[a.pending++]=L}function Z(a,L){a.pending_buf[a.pending++]=L>>>8&255,a.pending_buf[a.pending++]=255&L}function H(a,L){var D,b,p=a.max_chain_length,S=a.strstart,F=a.prev_length,N=a.nice_match,E=a.strstart>a.w_size-J?a.strstart-(a.w_size-J):0,j=a.window,K=a.w_mask,W=a.prev,Q=a.strstart+I,rt=j[S+F-1],et=j[S+F];a.prev_length>=a.good_match&&(p>>=2),N>a.lookahead&&(N=a.lookahead);do if(j[(D=L)+F]===et&&j[D+F-1]===rt&&j[D]===j[S]&&j[++D]===j[S+1]){S+=2,D++;do;while(j[++S]===j[++D]&&j[++S]===j[++D]&&j[++S]===j[++D]&&j[++S]===j[++D]&&j[++S]===j[++D]&&j[++S]===j[++D]&&j[++S]===j[++D]&&j[++S]===j[++D]&&S<Q);if(b=I-(Q-S),S=Q-I,F<b){if(a.match_start=L,N<=(F=b))break;rt=j[S+F-1],et=j[S+F]}}while((L=W[L&K])>E&&--p!=0);return F<=a.lookahead?F:a.lookahead}function nt(a){var L,D,b,p,S,F,N,E,j,K,W=a.w_size;do{if(p=a.window_size-a.lookahead-a.strstart,a.strstart>=W+(W-J)){for(n.arraySet(a.window,a.window,W,W,0),a.match_start-=W,a.strstart-=W,a.block_start-=W,L=D=a.hash_size;b=a.head[--L],a.head[L]=W<=b?b-W:0,--D;);for(L=D=W;b=a.prev[--L],a.prev[L]=W<=b?b-W:0,--D;);p+=W}if(a.strm.avail_in===0)break;if(F=a.strm,N=a.window,E=a.strstart+a.lookahead,j=p,K=void 0,K=F.avail_in,j<K&&(K=j),D=K===0?0:(F.avail_in-=K,n.arraySet(N,F.input,F.next_in,K,E),F.state.wrap===1?F.adler=l(F.adler,N,K,E):F.state.wrap===2&&(F.adler=c(F.adler,N,K,E)),F.next_in+=K,F.total_in+=K,K),a.lookahead+=D,a.lookahead+a.insert>=O)for(S=a.strstart-a.insert,a.ins_h=a.window[S],a.ins_h=(a.ins_h<<a.hash_shift^a.window[S+1])&a.hash_mask;a.insert&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[S+O-1])&a.hash_mask,a.prev[S&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=S,S++,a.insert--,!(a.lookahead+a.insert<O)););}while(a.lookahead<J&&a.strm.avail_in!==0)}function ot(a,L){for(var D,b;;){if(a.lookahead<J){if(nt(a),a.lookahead<J&&L===m)return o;if(a.lookahead===0)break}if(D=0,a.lookahead>=O&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+O-1])&a.hash_mask,D=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),D!==0&&a.strstart-D<=a.w_size-J&&(a.match_length=H(a,D)),a.match_length>=O)if(b=s._tr_tally(a,a.strstart-a.match_start,a.match_length-O),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=O){for(a.match_length--;a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+O-1])&a.hash_mask,D=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart,--a.match_length!=0;);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else b=s._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(b&&(A(a,!1),a.strm.avail_out===0))return o}return a.insert=a.strstart<O-1?a.strstart:O-1,L===v?(A(a,!0),a.strm.avail_out===0?X:B):a.last_lit&&(A(a,!1),a.strm.avail_out===0)?o:P}function tt(a,L){for(var D,b,p;;){if(a.lookahead<J){if(nt(a),a.lookahead<J&&L===m)return o;if(a.lookahead===0)break}if(D=0,a.lookahead>=O&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+O-1])&a.hash_mask,D=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=O-1,D!==0&&a.prev_length<a.max_lazy_match&&a.strstart-D<=a.w_size-J&&(a.match_length=H(a,D),a.match_length<=5&&(a.strategy===1||a.match_length===O&&4096<a.strstart-a.match_start)&&(a.match_length=O-1)),a.prev_length>=O&&a.match_length<=a.prev_length){for(p=a.strstart+a.lookahead-O,b=s._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-O),a.lookahead-=a.prev_length-1,a.prev_length-=2;++a.strstart<=p&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+O-1])&a.hash_mask,D=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),--a.prev_length!=0;);if(a.match_available=0,a.match_length=O-1,a.strstart++,b&&(A(a,!1),a.strm.avail_out===0))return o}else if(a.match_available){if((b=s._tr_tally(a,0,a.window[a.strstart-1]))&&A(a,!1),a.strstart++,a.lookahead--,a.strm.avail_out===0)return o}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(b=s._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<O-1?a.strstart:O-1,L===v?(A(a,!0),a.strm.avail_out===0?X:B):a.last_lit&&(A(a,!1),a.strm.avail_out===0)?o:P}function it(a,L,D,b,p){this.good_length=a,this.max_lazy=L,this.nice_length=D,this.max_chain=b,this.func=p}function st(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(2*R),this.dyn_dtree=new n.Buf16(2*(2*C+1)),this.bl_tree=new n.Buf16(2*(2*U+1)),Y(this.dyn_ltree),Y(this.dyn_dtree),Y(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(G+1),this.heap=new n.Buf16(2*x+1),Y(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(2*x+1),Y(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function at(a){var L;return a&&a.state?(a.total_in=a.total_out=0,a.data_type=d,(L=a.state).pending=0,L.pending_out=0,L.wrap<0&&(L.wrap=-L.wrap),L.status=L.wrap?_:z,a.adler=L.wrap===2?0:1,L.last_flush=m,s._tr_init(L),h):V(a,y)}function yt(a){var L=at(a);return L===h&&function(D){D.window_size=2*D.w_size,Y(D.head),D.max_lazy_match=i[D.level].max_lazy,D.good_match=i[D.level].good_length,D.nice_match=i[D.level].nice_length,D.max_chain_length=i[D.level].max_chain,D.strstart=0,D.block_start=0,D.lookahead=0,D.insert=0,D.match_length=D.prev_length=O-1,D.match_available=0,D.ins_h=0}(a.state),L}function pt(a,L,D,b,p,S){if(!a)return y;var F=1;if(L===u&&(L=6),b<0?(F=0,b=-b):15<b&&(F=2,b-=16),p<1||k<p||D!==w||b<8||15<b||L<0||9<L||S<0||f<S)return V(a,y);b===8&&(b=9);var N=new st;return(a.state=N).strm=a,N.wrap=F,N.gzhead=null,N.w_bits=b,N.w_size=1<<N.w_bits,N.w_mask=N.w_size-1,N.hash_bits=p+7,N.hash_size=1<<N.hash_bits,N.hash_mask=N.hash_size-1,N.hash_shift=~~((N.hash_bits+O-1)/O),N.window=new n.Buf8(2*N.w_size),N.head=new n.Buf16(N.hash_size),N.prev=new n.Buf16(N.w_size),N.lit_bufsize=1<<p+6,N.pending_buf_size=4*N.lit_bufsize,N.pending_buf=new n.Buf8(N.pending_buf_size),N.d_buf=1*N.lit_bufsize,N.l_buf=3*N.lit_bufsize,N.level=L,N.strategy=S,N.method=D,yt(a)}i=[new it(0,0,0,0,function(a,L){var D=65535;for(D>a.pending_buf_size-5&&(D=a.pending_buf_size-5);;){if(a.lookahead<=1){if(nt(a),a.lookahead===0&&L===m)return o;if(a.lookahead===0)break}a.strstart+=a.lookahead,a.lookahead=0;var b=a.block_start+D;if((a.strstart===0||a.strstart>=b)&&(a.lookahead=a.strstart-b,a.strstart=b,A(a,!1),a.strm.avail_out===0)||a.strstart-a.block_start>=a.w_size-J&&(A(a,!1),a.strm.avail_out===0))return o}return a.insert=0,L===v?(A(a,!0),a.strm.avail_out===0?X:B):(a.strstart>a.block_start&&(A(a,!1),a.strm.avail_out),o)}),new it(4,4,8,4,ot),new it(4,5,16,8,ot),new it(4,6,32,32,ot),new it(4,4,16,16,tt),new it(8,16,32,32,tt),new it(8,16,128,128,tt),new it(8,32,128,256,tt),new it(32,128,258,1024,tt),new it(32,258,258,4096,tt)],e.deflateInit=function(a,L){return pt(a,L,w,15,8,0)},e.deflateInit2=pt,e.deflateReset=yt,e.deflateResetKeep=at,e.deflateSetHeader=function(a,L){return a&&a.state?a.state.wrap!==2?y:(a.state.gzhead=L,h):y},e.deflate=function(a,L){var D,b,p,S;if(!a||!a.state||5<L||L<0)return a?V(a,y):y;if(b=a.state,!a.output||!a.input&&a.avail_in!==0||b.status===666&&L!==v)return V(a,a.avail_out===0?-5:y);if(b.strm=a,D=b.last_flush,b.last_flush=L,b.status===_)if(b.wrap===2)a.adler=0,q(b,31),q(b,139),q(b,8),b.gzhead?(q(b,(b.gzhead.text?1:0)+(b.gzhead.hcrc?2:0)+(b.gzhead.extra?4:0)+(b.gzhead.name?8:0)+(b.gzhead.comment?16:0)),q(b,255&b.gzhead.time),q(b,b.gzhead.time>>8&255),q(b,b.gzhead.time>>16&255),q(b,b.gzhead.time>>24&255),q(b,b.level===9?2:2<=b.strategy||b.level<2?4:0),q(b,255&b.gzhead.os),b.gzhead.extra&&b.gzhead.extra.length&&(q(b,255&b.gzhead.extra.length),q(b,b.gzhead.extra.length>>8&255)),b.gzhead.hcrc&&(a.adler=c(a.adler,b.pending_buf,b.pending,0)),b.gzindex=0,b.status=69):(q(b,0),q(b,0),q(b,0),q(b,0),q(b,0),q(b,b.level===9?2:2<=b.strategy||b.level<2?4:0),q(b,3),b.status=z);else{var F=w+(b.w_bits-8<<4)<<8;F|=(2<=b.strategy||b.level<2?0:b.level<6?1:b.level===6?2:3)<<6,b.strstart!==0&&(F|=32),F+=31-F%31,b.status=z,Z(b,F),b.strstart!==0&&(Z(b,a.adler>>>16),Z(b,65535&a.adler)),a.adler=1}if(b.status===69)if(b.gzhead.extra){for(p=b.pending;b.gzindex<(65535&b.gzhead.extra.length)&&(b.pending!==b.pending_buf_size||(b.gzhead.hcrc&&b.pending>p&&(a.adler=c(a.adler,b.pending_buf,b.pending-p,p)),T(a),p=b.pending,b.pending!==b.pending_buf_size));)q(b,255&b.gzhead.extra[b.gzindex]),b.gzindex++;b.gzhead.hcrc&&b.pending>p&&(a.adler=c(a.adler,b.pending_buf,b.pending-p,p)),b.gzindex===b.gzhead.extra.length&&(b.gzindex=0,b.status=73)}else b.status=73;if(b.status===73)if(b.gzhead.name){p=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>p&&(a.adler=c(a.adler,b.pending_buf,b.pending-p,p)),T(a),p=b.pending,b.pending===b.pending_buf_size)){S=1;break}S=b.gzindex<b.gzhead.name.length?255&b.gzhead.name.charCodeAt(b.gzindex++):0,q(b,S)}while(S!==0);b.gzhead.hcrc&&b.pending>p&&(a.adler=c(a.adler,b.pending_buf,b.pending-p,p)),S===0&&(b.gzindex=0,b.status=91)}else b.status=91;if(b.status===91)if(b.gzhead.comment){p=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>p&&(a.adler=c(a.adler,b.pending_buf,b.pending-p,p)),T(a),p=b.pending,b.pending===b.pending_buf_size)){S=1;break}S=b.gzindex<b.gzhead.comment.length?255&b.gzhead.comment.charCodeAt(b.gzindex++):0,q(b,S)}while(S!==0);b.gzhead.hcrc&&b.pending>p&&(a.adler=c(a.adler,b.pending_buf,b.pending-p,p)),S===0&&(b.status=103)}else b.status=103;if(b.status===103&&(b.gzhead.hcrc?(b.pending+2>b.pending_buf_size&&T(a),b.pending+2<=b.pending_buf_size&&(q(b,255&a.adler),q(b,a.adler>>8&255),a.adler=0,b.status=z)):b.status=z),b.pending!==0){if(T(a),a.avail_out===0)return b.last_flush=-1,h}else if(a.avail_in===0&&M(L)<=M(D)&&L!==v)return V(a,-5);if(b.status===666&&a.avail_in!==0)return V(a,-5);if(a.avail_in!==0||b.lookahead!==0||L!==m&&b.status!==666){var N=b.strategy===2?function(E,j){for(var K;;){if(E.lookahead===0&&(nt(E),E.lookahead===0)){if(j===m)return o;break}if(E.match_length=0,K=s._tr_tally(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++,K&&(A(E,!1),E.strm.avail_out===0))return o}return E.insert=0,j===v?(A(E,!0),E.strm.avail_out===0?X:B):E.last_lit&&(A(E,!1),E.strm.avail_out===0)?o:P}(b,L):b.strategy===3?function(E,j){for(var K,W,Q,rt,et=E.window;;){if(E.lookahead<=I){if(nt(E),E.lookahead<=I&&j===m)return o;if(E.lookahead===0)break}if(E.match_length=0,E.lookahead>=O&&0<E.strstart&&(W=et[Q=E.strstart-1])===et[++Q]&&W===et[++Q]&&W===et[++Q]){rt=E.strstart+I;do;while(W===et[++Q]&&W===et[++Q]&&W===et[++Q]&&W===et[++Q]&&W===et[++Q]&&W===et[++Q]&&W===et[++Q]&&W===et[++Q]&&Q<rt);E.match_length=I-(rt-Q),E.match_length>E.lookahead&&(E.match_length=E.lookahead)}if(E.match_length>=O?(K=s._tr_tally(E,1,E.match_length-O),E.lookahead-=E.match_length,E.strstart+=E.match_length,E.match_length=0):(K=s._tr_tally(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++),K&&(A(E,!1),E.strm.avail_out===0))return o}return E.insert=0,j===v?(A(E,!0),E.strm.avail_out===0?X:B):E.last_lit&&(A(E,!1),E.strm.avail_out===0)?o:P}(b,L):i[b.level].func(b,L);if(N!==X&&N!==B||(b.status=666),N===o||N===X)return a.avail_out===0&&(b.last_flush=-1),h;if(N===P&&(L===1?s._tr_align(b):L!==5&&(s._tr_stored_block(b,0,0,!1),L===3&&(Y(b.head),b.lookahead===0&&(b.strstart=0,b.block_start=0,b.insert=0))),T(a),a.avail_out===0))return b.last_flush=-1,h}return L!==v?h:b.wrap<=0?1:(b.wrap===2?(q(b,255&a.adler),q(b,a.adler>>8&255),q(b,a.adler>>16&255),q(b,a.adler>>24&255),q(b,255&a.total_in),q(b,a.total_in>>8&255),q(b,a.total_in>>16&255),q(b,a.total_in>>24&255)):(Z(b,a.adler>>>16),Z(b,65535&a.adler)),T(a),0<b.wrap&&(b.wrap=-b.wrap),b.pending!==0?h:1)},e.deflateEnd=function(a){var L;return a&&a.state?(L=a.state.status)!==_&&L!==69&&L!==73&&L!==91&&L!==103&&L!==z&&L!==666?V(a,y):(a.state=null,L===z?V(a,-3):h):y},e.deflateSetDictionary=function(a,L){var D,b,p,S,F,N,E,j,K=L.length;if(!a||!a.state||(S=(D=a.state).wrap)===2||S===1&&D.status!==_||D.lookahead)return y;for(S===1&&(a.adler=l(a.adler,L,K,0)),D.wrap=0,K>=D.w_size&&(S===0&&(Y(D.head),D.strstart=0,D.block_start=0,D.insert=0),j=new n.Buf8(D.w_size),n.arraySet(j,L,K-D.w_size,D.w_size,0),L=j,K=D.w_size),F=a.avail_in,N=a.next_in,E=a.input,a.avail_in=K,a.next_in=0,a.input=L,nt(D);D.lookahead>=O;){for(b=D.strstart,p=D.lookahead-(O-1);D.ins_h=(D.ins_h<<D.hash_shift^D.window[b+O-1])&D.hash_mask,D.prev[b&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=b,b++,--p;);D.strstart=b,D.lookahead=O-1,nt(D)}return D.strstart+=D.lookahead,D.block_start=D.strstart,D.insert=D.lookahead,D.lookahead=0,D.match_length=D.prev_length=O-1,D.match_available=0,a.next_in=N,a.input=E,a.avail_in=F,D.wrap=S,h},e.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,t,e){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,t,e){"use strict";t.exports=function(i,n){var s,l,c,g,m,v,h,y,u,f,d,w,k,x,C,U,R,G,O,I,J,_,z,o,P;s=i.state,l=i.next_in,o=i.input,c=l+(i.avail_in-5),g=i.next_out,P=i.output,m=g-(n-i.avail_out),v=g+(i.avail_out-257),h=s.dmax,y=s.wsize,u=s.whave,f=s.wnext,d=s.window,w=s.hold,k=s.bits,x=s.lencode,C=s.distcode,U=(1<<s.lenbits)-1,R=(1<<s.distbits)-1;t:do{k<15&&(w+=o[l++]<<k,k+=8,w+=o[l++]<<k,k+=8),G=x[w&U];e:for(;;){if(w>>>=O=G>>>24,k-=O,(O=G>>>16&255)===0)P[g++]=65535&G;else{if(!(16&O)){if(!(64&O)){G=x[(65535&G)+(w&(1<<O)-1)];continue e}if(32&O){s.mode=12;break t}i.msg="invalid literal/length code",s.mode=30;break t}I=65535&G,(O&=15)&&(k<O&&(w+=o[l++]<<k,k+=8),I+=w&(1<<O)-1,w>>>=O,k-=O),k<15&&(w+=o[l++]<<k,k+=8,w+=o[l++]<<k,k+=8),G=C[w&R];i:for(;;){if(w>>>=O=G>>>24,k-=O,!(16&(O=G>>>16&255))){if(!(64&O)){G=C[(65535&G)+(w&(1<<O)-1)];continue i}i.msg="invalid distance code",s.mode=30;break t}if(J=65535&G,k<(O&=15)&&(w+=o[l++]<<k,(k+=8)<O&&(w+=o[l++]<<k,k+=8)),h<(J+=w&(1<<O)-1)){i.msg="invalid distance too far back",s.mode=30;break t}if(w>>>=O,k-=O,(O=g-m)<J){if(u<(O=J-O)&&s.sane){i.msg="invalid distance too far back",s.mode=30;break t}if(z=d,(_=0)===f){if(_+=y-O,O<I){for(I-=O;P[g++]=d[_++],--O;);_=g-J,z=P}}else if(f<O){if(_+=y+f-O,(O-=f)<I){for(I-=O;P[g++]=d[_++],--O;);if(_=0,f<I){for(I-=O=f;P[g++]=d[_++],--O;);_=g-J,z=P}}}else if(_+=f-O,O<I){for(I-=O;P[g++]=d[_++],--O;);_=g-J,z=P}for(;2<I;)P[g++]=z[_++],P[g++]=z[_++],P[g++]=z[_++],I-=3;I&&(P[g++]=z[_++],1<I&&(P[g++]=z[_++]))}else{for(_=g-J;P[g++]=P[_++],P[g++]=P[_++],P[g++]=P[_++],2<(I-=3););I&&(P[g++]=P[_++],1<I&&(P[g++]=P[_++]))}break}}break}}while(l<c&&g<v);l-=I=k>>3,w&=(1<<(k-=I<<3))-1,i.next_in=l,i.next_out=g,i.avail_in=l<c?c-l+5:5-(l-c),i.avail_out=g<v?v-g+257:257-(g-v),s.hold=w,s.bits=k}},{}],49:[function(r,t,e){"use strict";var i=r("../utils/common"),n=r("./adler32"),s=r("./crc32"),l=r("./inffast"),c=r("./inftrees"),g=1,m=2,v=0,h=-2,y=1,u=852,f=592;function d(_){return(_>>>24&255)+(_>>>8&65280)+((65280&_)<<8)+((255&_)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function k(_){var z;return _&&_.state?(z=_.state,_.total_in=_.total_out=z.total=0,_.msg="",z.wrap&&(_.adler=1&z.wrap),z.mode=y,z.last=0,z.havedict=0,z.dmax=32768,z.head=null,z.hold=0,z.bits=0,z.lencode=z.lendyn=new i.Buf32(u),z.distcode=z.distdyn=new i.Buf32(f),z.sane=1,z.back=-1,v):h}function x(_){var z;return _&&_.state?((z=_.state).wsize=0,z.whave=0,z.wnext=0,k(_)):h}function C(_,z){var o,P;return _&&_.state?(P=_.state,z<0?(o=0,z=-z):(o=1+(z>>4),z<48&&(z&=15)),z&&(z<8||15<z)?h:(P.window!==null&&P.wbits!==z&&(P.window=null),P.wrap=o,P.wbits=z,x(_))):h}function U(_,z){var o,P;return _?(P=new w,(_.state=P).window=null,(o=C(_,z))!==v&&(_.state=null),o):h}var R,G,O=!0;function I(_){if(O){var z;for(R=new i.Buf32(512),G=new i.Buf32(32),z=0;z<144;)_.lens[z++]=8;for(;z<256;)_.lens[z++]=9;for(;z<280;)_.lens[z++]=7;for(;z<288;)_.lens[z++]=8;for(c(g,_.lens,0,288,R,0,_.work,{bits:9}),z=0;z<32;)_.lens[z++]=5;c(m,_.lens,0,32,G,0,_.work,{bits:5}),O=!1}_.lencode=R,_.lenbits=9,_.distcode=G,_.distbits=5}function J(_,z,o,P){var X,B=_.state;return B.window===null&&(B.wsize=1<<B.wbits,B.wnext=0,B.whave=0,B.window=new i.Buf8(B.wsize)),P>=B.wsize?(i.arraySet(B.window,z,o-B.wsize,B.wsize,0),B.wnext=0,B.whave=B.wsize):(P<(X=B.wsize-B.wnext)&&(X=P),i.arraySet(B.window,z,o-P,X,B.wnext),(P-=X)?(i.arraySet(B.window,z,o-P,P,0),B.wnext=P,B.whave=B.wsize):(B.wnext+=X,B.wnext===B.wsize&&(B.wnext=0),B.whave<B.wsize&&(B.whave+=X))),0}e.inflateReset=x,e.inflateReset2=C,e.inflateResetKeep=k,e.inflateInit=function(_){return U(_,15)},e.inflateInit2=U,e.inflate=function(_,z){var o,P,X,B,V,M,Y,T,A,q,Z,H,nt,ot,tt,it,st,at,yt,pt,a,L,D,b,p=0,S=new i.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!_||!_.state||!_.output||!_.input&&_.avail_in!==0)return h;(o=_.state).mode===12&&(o.mode=13),V=_.next_out,X=_.output,Y=_.avail_out,B=_.next_in,P=_.input,M=_.avail_in,T=o.hold,A=o.bits,q=M,Z=Y,L=v;t:for(;;)switch(o.mode){case y:if(o.wrap===0){o.mode=13;break}for(;A<16;){if(M===0)break t;M--,T+=P[B++]<<A,A+=8}if(2&o.wrap&&T===35615){S[o.check=0]=255&T,S[1]=T>>>8&255,o.check=s(o.check,S,2,0),A=T=0,o.mode=2;break}if(o.flags=0,o.head&&(o.head.done=!1),!(1&o.wrap)||(((255&T)<<8)+(T>>8))%31){_.msg="incorrect header check",o.mode=30;break}if((15&T)!=8){_.msg="unknown compression method",o.mode=30;break}if(A-=4,a=8+(15&(T>>>=4)),o.wbits===0)o.wbits=a;else if(a>o.wbits){_.msg="invalid window size",o.mode=30;break}o.dmax=1<<a,_.adler=o.check=1,o.mode=512&T?10:12,A=T=0;break;case 2:for(;A<16;){if(M===0)break t;M--,T+=P[B++]<<A,A+=8}if(o.flags=T,(255&o.flags)!=8){_.msg="unknown compression method",o.mode=30;break}if(57344&o.flags){_.msg="unknown header flags set",o.mode=30;break}o.head&&(o.head.text=T>>8&1),512&o.flags&&(S[0]=255&T,S[1]=T>>>8&255,o.check=s(o.check,S,2,0)),A=T=0,o.mode=3;case 3:for(;A<32;){if(M===0)break t;M--,T+=P[B++]<<A,A+=8}o.head&&(o.head.time=T),512&o.flags&&(S[0]=255&T,S[1]=T>>>8&255,S[2]=T>>>16&255,S[3]=T>>>24&255,o.check=s(o.check,S,4,0)),A=T=0,o.mode=4;case 4:for(;A<16;){if(M===0)break t;M--,T+=P[B++]<<A,A+=8}o.head&&(o.head.xflags=255&T,o.head.os=T>>8),512&o.flags&&(S[0]=255&T,S[1]=T>>>8&255,o.check=s(o.check,S,2,0)),A=T=0,o.mode=5;case 5:if(1024&o.flags){for(;A<16;){if(M===0)break t;M--,T+=P[B++]<<A,A+=8}o.length=T,o.head&&(o.head.extra_len=T),512&o.flags&&(S[0]=255&T,S[1]=T>>>8&255,o.check=s(o.check,S,2,0)),A=T=0}else o.head&&(o.head.extra=null);o.mode=6;case 6:if(1024&o.flags&&(M<(H=o.length)&&(H=M),H&&(o.head&&(a=o.head.extra_len-o.length,o.head.extra||(o.head.extra=new Array(o.head.extra_len)),i.arraySet(o.head.extra,P,B,H,a)),512&o.flags&&(o.check=s(o.check,P,H,B)),M-=H,B+=H,o.length-=H),o.length))break t;o.length=0,o.mode=7;case 7:if(2048&o.flags){if(M===0)break t;for(H=0;a=P[B+H++],o.head&&a&&o.length<65536&&(o.head.name+=String.fromCharCode(a)),a&&H<M;);if(512&o.flags&&(o.check=s(o.check,P,H,B)),M-=H,B+=H,a)break t}else o.head&&(o.head.name=null);o.length=0,o.mode=8;case 8:if(4096&o.flags){if(M===0)break t;for(H=0;a=P[B+H++],o.head&&a&&o.length<65536&&(o.head.comment+=String.fromCharCode(a)),a&&H<M;);if(512&o.flags&&(o.check=s(o.check,P,H,B)),M-=H,B+=H,a)break t}else o.head&&(o.head.comment=null);o.mode=9;case 9:if(512&o.flags){for(;A<16;){if(M===0)break t;M--,T+=P[B++]<<A,A+=8}if(T!==(65535&o.check)){_.msg="header crc mismatch",o.mode=30;break}A=T=0}o.head&&(o.head.hcrc=o.flags>>9&1,o.head.done=!0),_.adler=o.check=0,o.mode=12;break;case 10:for(;A<32;){if(M===0)break t;M--,T+=P[B++]<<A,A+=8}_.adler=o.check=d(T),A=T=0,o.mode=11;case 11:if(o.havedict===0)return _.next_out=V,_.avail_out=Y,_.next_in=B,_.avail_in=M,o.hold=T,o.bits=A,2;_.adler=o.check=1,o.mode=12;case 12:if(z===5||z===6)break t;case 13:if(o.last){T>>>=7&A,A-=7&A,o.mode=27;break}for(;A<3;){if(M===0)break t;M--,T+=P[B++]<<A,A+=8}switch(o.last=1&T,A-=1,3&(T>>>=1)){case 0:o.mode=14;break;case 1:if(I(o),o.mode=20,z!==6)break;T>>>=2,A-=2;break t;case 2:o.mode=17;break;case 3:_.msg="invalid block type",o.mode=30}T>>>=2,A-=2;break;case 14:for(T>>>=7&A,A-=7&A;A<32;){if(M===0)break t;M--,T+=P[B++]<<A,A+=8}if((65535&T)!=(T>>>16^65535)){_.msg="invalid stored block lengths",o.mode=30;break}if(o.length=65535&T,A=T=0,o.mode=15,z===6)break t;case 15:o.mode=16;case 16:if(H=o.length){if(M<H&&(H=M),Y<H&&(H=Y),H===0)break t;i.arraySet(X,P,B,H,V),M-=H,B+=H,Y-=H,V+=H,o.length-=H;break}o.mode=12;break;case 17:for(;A<14;){if(M===0)break t;M--,T+=P[B++]<<A,A+=8}if(o.nlen=257+(31&T),T>>>=5,A-=5,o.ndist=1+(31&T),T>>>=5,A-=5,o.ncode=4+(15&T),T>>>=4,A-=4,286<o.nlen||30<o.ndist){_.msg="too many length or distance symbols",o.mode=30;break}o.have=0,o.mode=18;case 18:for(;o.have<o.ncode;){for(;A<3;){if(M===0)break t;M--,T+=P[B++]<<A,A+=8}o.lens[F[o.have++]]=7&T,T>>>=3,A-=3}for(;o.have<19;)o.lens[F[o.have++]]=0;if(o.lencode=o.lendyn,o.lenbits=7,D={bits:o.lenbits},L=c(0,o.lens,0,19,o.lencode,0,o.work,D),o.lenbits=D.bits,L){_.msg="invalid code lengths set",o.mode=30;break}o.have=0,o.mode=19;case 19:for(;o.have<o.nlen+o.ndist;){for(;it=(p=o.lencode[T&(1<<o.lenbits)-1])>>>16&255,st=65535&p,!((tt=p>>>24)<=A);){if(M===0)break t;M--,T+=P[B++]<<A,A+=8}if(st<16)T>>>=tt,A-=tt,o.lens[o.have++]=st;else{if(st===16){for(b=tt+2;A<b;){if(M===0)break t;M--,T+=P[B++]<<A,A+=8}if(T>>>=tt,A-=tt,o.have===0){_.msg="invalid bit length repeat",o.mode=30;break}a=o.lens[o.have-1],H=3+(3&T),T>>>=2,A-=2}else if(st===17){for(b=tt+3;A<b;){if(M===0)break t;M--,T+=P[B++]<<A,A+=8}A-=tt,a=0,H=3+(7&(T>>>=tt)),T>>>=3,A-=3}else{for(b=tt+7;A<b;){if(M===0)break t;M--,T+=P[B++]<<A,A+=8}A-=tt,a=0,H=11+(127&(T>>>=tt)),T>>>=7,A-=7}if(o.have+H>o.nlen+o.ndist){_.msg="invalid bit length repeat",o.mode=30;break}for(;H--;)o.lens[o.have++]=a}}if(o.mode===30)break;if(o.lens[256]===0){_.msg="invalid code -- missing end-of-block",o.mode=30;break}if(o.lenbits=9,D={bits:o.lenbits},L=c(g,o.lens,0,o.nlen,o.lencode,0,o.work,D),o.lenbits=D.bits,L){_.msg="invalid literal/lengths set",o.mode=30;break}if(o.distbits=6,o.distcode=o.distdyn,D={bits:o.distbits},L=c(m,o.lens,o.nlen,o.ndist,o.distcode,0,o.work,D),o.distbits=D.bits,L){_.msg="invalid distances set",o.mode=30;break}if(o.mode=20,z===6)break t;case 20:o.mode=21;case 21:if(6<=M&&258<=Y){_.next_out=V,_.avail_out=Y,_.next_in=B,_.avail_in=M,o.hold=T,o.bits=A,l(_,Z),V=_.next_out,X=_.output,Y=_.avail_out,B=_.next_in,P=_.input,M=_.avail_in,T=o.hold,A=o.bits,o.mode===12&&(o.back=-1);break}for(o.back=0;it=(p=o.lencode[T&(1<<o.lenbits)-1])>>>16&255,st=65535&p,!((tt=p>>>24)<=A);){if(M===0)break t;M--,T+=P[B++]<<A,A+=8}if(it&&!(240&it)){for(at=tt,yt=it,pt=st;it=(p=o.lencode[pt+((T&(1<<at+yt)-1)>>at)])>>>16&255,st=65535&p,!(at+(tt=p>>>24)<=A);){if(M===0)break t;M--,T+=P[B++]<<A,A+=8}T>>>=at,A-=at,o.back+=at}if(T>>>=tt,A-=tt,o.back+=tt,o.length=st,it===0){o.mode=26;break}if(32&it){o.back=-1,o.mode=12;break}if(64&it){_.msg="invalid literal/length code",o.mode=30;break}o.extra=15&it,o.mode=22;case 22:if(o.extra){for(b=o.extra;A<b;){if(M===0)break t;M--,T+=P[B++]<<A,A+=8}o.length+=T&(1<<o.extra)-1,T>>>=o.extra,A-=o.extra,o.back+=o.extra}o.was=o.length,o.mode=23;case 23:for(;it=(p=o.distcode[T&(1<<o.distbits)-1])>>>16&255,st=65535&p,!((tt=p>>>24)<=A);){if(M===0)break t;M--,T+=P[B++]<<A,A+=8}if(!(240&it)){for(at=tt,yt=it,pt=st;it=(p=o.distcode[pt+((T&(1<<at+yt)-1)>>at)])>>>16&255,st=65535&p,!(at+(tt=p>>>24)<=A);){if(M===0)break t;M--,T+=P[B++]<<A,A+=8}T>>>=at,A-=at,o.back+=at}if(T>>>=tt,A-=tt,o.back+=tt,64&it){_.msg="invalid distance code",o.mode=30;break}o.offset=st,o.extra=15&it,o.mode=24;case 24:if(o.extra){for(b=o.extra;A<b;){if(M===0)break t;M--,T+=P[B++]<<A,A+=8}o.offset+=T&(1<<o.extra)-1,T>>>=o.extra,A-=o.extra,o.back+=o.extra}if(o.offset>o.dmax){_.msg="invalid distance too far back",o.mode=30;break}o.mode=25;case 25:if(Y===0)break t;if(H=Z-Y,o.offset>H){if((H=o.offset-H)>o.whave&&o.sane){_.msg="invalid distance too far back",o.mode=30;break}nt=H>o.wnext?(H-=o.wnext,o.wsize-H):o.wnext-H,H>o.length&&(H=o.length),ot=o.window}else ot=X,nt=V-o.offset,H=o.length;for(Y<H&&(H=Y),Y-=H,o.length-=H;X[V++]=ot[nt++],--H;);o.length===0&&(o.mode=21);break;case 26:if(Y===0)break t;X[V++]=o.length,Y--,o.mode=21;break;case 27:if(o.wrap){for(;A<32;){if(M===0)break t;M--,T|=P[B++]<<A,A+=8}if(Z-=Y,_.total_out+=Z,o.total+=Z,Z&&(_.adler=o.check=o.flags?s(o.check,X,Z,V-Z):n(o.check,X,Z,V-Z)),Z=Y,(o.flags?T:d(T))!==o.check){_.msg="incorrect data check",o.mode=30;break}A=T=0}o.mode=28;case 28:if(o.wrap&&o.flags){for(;A<32;){if(M===0)break t;M--,T+=P[B++]<<A,A+=8}if(T!==(4294967295&o.total)){_.msg="incorrect length check",o.mode=30;break}A=T=0}o.mode=29;case 29:L=1;break t;case 30:L=-3;break t;case 31:return-4;case 32:default:return h}return _.next_out=V,_.avail_out=Y,_.next_in=B,_.avail_in=M,o.hold=T,o.bits=A,(o.wsize||Z!==_.avail_out&&o.mode<30&&(o.mode<27||z!==4))&&J(_,_.output,_.next_out,Z-_.avail_out)?(o.mode=31,-4):(q-=_.avail_in,Z-=_.avail_out,_.total_in+=q,_.total_out+=Z,o.total+=Z,o.wrap&&Z&&(_.adler=o.check=o.flags?s(o.check,X,Z,_.next_out-Z):n(o.check,X,Z,_.next_out-Z)),_.data_type=o.bits+(o.last?64:0)+(o.mode===12?128:0)+(o.mode===20||o.mode===15?256:0),(q==0&&Z===0||z===4)&&L===v&&(L=-5),L)},e.inflateEnd=function(_){if(!_||!_.state)return h;var z=_.state;return z.window&&(z.window=null),_.state=null,v},e.inflateGetHeader=function(_,z){var o;return _&&_.state&&2&(o=_.state).wrap?((o.head=z).done=!1,v):h},e.inflateSetDictionary=function(_,z){var o,P=z.length;return _&&_.state?(o=_.state).wrap!==0&&o.mode!==11?h:o.mode===11&&n(1,z,P,0)!==o.check?-3:J(_,z,P,P)?(o.mode=31,-4):(o.havedict=1,v):h},e.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,t,e){"use strict";var i=r("../utils/common"),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(g,m,v,h,y,u,f,d){var w,k,x,C,U,R,G,O,I,J=d.bits,_=0,z=0,o=0,P=0,X=0,B=0,V=0,M=0,Y=0,T=0,A=null,q=0,Z=new i.Buf16(16),H=new i.Buf16(16),nt=null,ot=0;for(_=0;_<=15;_++)Z[_]=0;for(z=0;z<h;z++)Z[m[v+z]]++;for(X=J,P=15;1<=P&&Z[P]===0;P--);if(P<X&&(X=P),P===0)return y[u++]=20971520,y[u++]=20971520,d.bits=1,0;for(o=1;o<P&&Z[o]===0;o++);for(X<o&&(X=o),_=M=1;_<=15;_++)if(M<<=1,(M-=Z[_])<0)return-1;if(0<M&&(g===0||P!==1))return-1;for(H[1]=0,_=1;_<15;_++)H[_+1]=H[_]+Z[_];for(z=0;z<h;z++)m[v+z]!==0&&(f[H[m[v+z]]++]=z);if(R=g===0?(A=nt=f,19):g===1?(A=n,q-=257,nt=s,ot-=257,256):(A=l,nt=c,-1),_=o,U=u,V=z=T=0,x=-1,C=(Y=1<<(B=X))-1,g===1&&852<Y||g===2&&592<Y)return 1;for(;;){for(G=_-V,I=f[z]<R?(O=0,f[z]):f[z]>R?(O=nt[ot+f[z]],A[q+f[z]]):(O=96,0),w=1<<_-V,o=k=1<<B;y[U+(T>>V)+(k-=w)]=G<<24|O<<16|I|0,k!==0;);for(w=1<<_-1;T&w;)w>>=1;if(w!==0?(T&=w-1,T+=w):T=0,z++,--Z[_]==0){if(_===P)break;_=m[v+f[z]]}if(X<_&&(T&C)!==x){for(V===0&&(V=X),U+=o,M=1<<(B=_-V);B+V<P&&!((M-=Z[B+V])<=0);)B++,M<<=1;if(Y+=1<<B,g===1&&852<Y||g===2&&592<Y)return 1;y[x=T&C]=X<<24|B<<16|U-u|0}}return T!==0&&(y[U+T]=_-V<<24|64<<16|0),d.bits=X,0}},{"../utils/common":41}],51:[function(r,t,e){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,t,e){"use strict";var i=r("../utils/common"),n=0,s=1;function l(p){for(var S=p.length;0<=--S;)p[S]=0}var c=0,g=29,m=256,v=m+1+g,h=30,y=19,u=2*v+1,f=15,d=16,w=7,k=256,x=16,C=17,U=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],G=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],J=new Array(2*(v+2));l(J);var _=new Array(2*h);l(_);var z=new Array(512);l(z);var o=new Array(256);l(o);var P=new Array(g);l(P);var X,B,V,M=new Array(h);function Y(p,S,F,N,E){this.static_tree=p,this.extra_bits=S,this.extra_base=F,this.elems=N,this.max_length=E,this.has_stree=p&&p.length}function T(p,S){this.dyn_tree=p,this.max_code=0,this.stat_desc=S}function A(p){return p<256?z[p]:z[256+(p>>>7)]}function q(p,S){p.pending_buf[p.pending++]=255&S,p.pending_buf[p.pending++]=S>>>8&255}function Z(p,S,F){p.bi_valid>d-F?(p.bi_buf|=S<<p.bi_valid&65535,q(p,p.bi_buf),p.bi_buf=S>>d-p.bi_valid,p.bi_valid+=F-d):(p.bi_buf|=S<<p.bi_valid&65535,p.bi_valid+=F)}function H(p,S,F){Z(p,F[2*S],F[2*S+1])}function nt(p,S){for(var F=0;F|=1&p,p>>>=1,F<<=1,0<--S;);return F>>>1}function ot(p,S,F){var N,E,j=new Array(f+1),K=0;for(N=1;N<=f;N++)j[N]=K=K+F[N-1]<<1;for(E=0;E<=S;E++){var W=p[2*E+1];W!==0&&(p[2*E]=nt(j[W]++,W))}}function tt(p){var S;for(S=0;S<v;S++)p.dyn_ltree[2*S]=0;for(S=0;S<h;S++)p.dyn_dtree[2*S]=0;for(S=0;S<y;S++)p.bl_tree[2*S]=0;p.dyn_ltree[2*k]=1,p.opt_len=p.static_len=0,p.last_lit=p.matches=0}function it(p){8<p.bi_valid?q(p,p.bi_buf):0<p.bi_valid&&(p.pending_buf[p.pending++]=p.bi_buf),p.bi_buf=0,p.bi_valid=0}function st(p,S,F,N){var E=2*S,j=2*F;return p[E]<p[j]||p[E]===p[j]&&N[S]<=N[F]}function at(p,S,F){for(var N=p.heap[F],E=F<<1;E<=p.heap_len&&(E<p.heap_len&&st(S,p.heap[E+1],p.heap[E],p.depth)&&E++,!st(S,N,p.heap[E],p.depth));)p.heap[F]=p.heap[E],F=E,E<<=1;p.heap[F]=N}function yt(p,S,F){var N,E,j,K,W=0;if(p.last_lit!==0)for(;N=p.pending_buf[p.d_buf+2*W]<<8|p.pending_buf[p.d_buf+2*W+1],E=p.pending_buf[p.l_buf+W],W++,N===0?H(p,E,S):(H(p,(j=o[E])+m+1,S),(K=R[j])!==0&&Z(p,E-=P[j],K),H(p,j=A(--N),F),(K=G[j])!==0&&Z(p,N-=M[j],K)),W<p.last_lit;);H(p,k,S)}function pt(p,S){var F,N,E,j=S.dyn_tree,K=S.stat_desc.static_tree,W=S.stat_desc.has_stree,Q=S.stat_desc.elems,rt=-1;for(p.heap_len=0,p.heap_max=u,F=0;F<Q;F++)j[2*F]!==0?(p.heap[++p.heap_len]=rt=F,p.depth[F]=0):j[2*F+1]=0;for(;p.heap_len<2;)j[2*(E=p.heap[++p.heap_len]=rt<2?++rt:0)]=1,p.depth[E]=0,p.opt_len--,W&&(p.static_len-=K[2*E+1]);for(S.max_code=rt,F=p.heap_len>>1;1<=F;F--)at(p,j,F);for(E=Q;F=p.heap[1],p.heap[1]=p.heap[p.heap_len--],at(p,j,1),N=p.heap[1],p.heap[--p.heap_max]=F,p.heap[--p.heap_max]=N,j[2*E]=j[2*F]+j[2*N],p.depth[E]=(p.depth[F]>=p.depth[N]?p.depth[F]:p.depth[N])+1,j[2*F+1]=j[2*N+1]=E,p.heap[1]=E++,at(p,j,1),2<=p.heap_len;);p.heap[--p.heap_max]=p.heap[1],function(et,bt){var $t,wt,te,ht,de,Ge,xt=bt.dyn_tree,yi=bt.max_code,lr=bt.stat_desc.static_tree,hr=bt.stat_desc.has_stree,ur=bt.stat_desc.extra_bits,bi=bt.stat_desc.extra_base,ee=bt.stat_desc.max_length,fe=0;for(ht=0;ht<=f;ht++)et.bl_count[ht]=0;for(xt[2*et.heap[et.heap_max]+1]=0,$t=et.heap_max+1;$t<u;$t++)ee<(ht=xt[2*xt[2*(wt=et.heap[$t])+1]+1]+1)&&(ht=ee,fe++),xt[2*wt+1]=ht,yi<wt||(et.bl_count[ht]++,de=0,bi<=wt&&(de=ur[wt-bi]),Ge=xt[2*wt],et.opt_len+=Ge*(ht+de),hr&&(et.static_len+=Ge*(lr[2*wt+1]+de)));if(fe!==0){do{for(ht=ee-1;et.bl_count[ht]===0;)ht--;et.bl_count[ht]--,et.bl_count[ht+1]+=2,et.bl_count[ee]--,fe-=2}while(0<fe);for(ht=ee;ht!==0;ht--)for(wt=et.bl_count[ht];wt!==0;)yi<(te=et.heap[--$t])||(xt[2*te+1]!==ht&&(et.opt_len+=(ht-xt[2*te+1])*xt[2*te],xt[2*te+1]=ht),wt--)}}(p,S),ot(j,rt,p.bl_count)}function a(p,S,F){var N,E,j=-1,K=S[1],W=0,Q=7,rt=4;for(K===0&&(Q=138,rt=3),S[2*(F+1)+1]=65535,N=0;N<=F;N++)E=K,K=S[2*(N+1)+1],++W<Q&&E===K||(W<rt?p.bl_tree[2*E]+=W:E!==0?(E!==j&&p.bl_tree[2*E]++,p.bl_tree[2*x]++):W<=10?p.bl_tree[2*C]++:p.bl_tree[2*U]++,j=E,rt=(W=0)===K?(Q=138,3):E===K?(Q=6,3):(Q=7,4))}function L(p,S,F){var N,E,j=-1,K=S[1],W=0,Q=7,rt=4;for(K===0&&(Q=138,rt=3),N=0;N<=F;N++)if(E=K,K=S[2*(N+1)+1],!(++W<Q&&E===K)){if(W<rt)for(;H(p,E,p.bl_tree),--W!=0;);else E!==0?(E!==j&&(H(p,E,p.bl_tree),W--),H(p,x,p.bl_tree),Z(p,W-3,2)):W<=10?(H(p,C,p.bl_tree),Z(p,W-3,3)):(H(p,U,p.bl_tree),Z(p,W-11,7));j=E,rt=(W=0)===K?(Q=138,3):E===K?(Q=6,3):(Q=7,4)}}l(M);var D=!1;function b(p,S,F,N){Z(p,(c<<1)+(N?1:0),3),function(E,j,K,W){it(E),W&&(q(E,K),q(E,~K)),i.arraySet(E.pending_buf,E.window,j,K,E.pending),E.pending+=K}(p,S,F,!0)}e._tr_init=function(p){D||(function(){var S,F,N,E,j,K=new Array(f+1);for(E=N=0;E<g-1;E++)for(P[E]=N,S=0;S<1<<R[E];S++)o[N++]=E;for(o[N-1]=E,E=j=0;E<16;E++)for(M[E]=j,S=0;S<1<<G[E];S++)z[j++]=E;for(j>>=7;E<h;E++)for(M[E]=j<<7,S=0;S<1<<G[E]-7;S++)z[256+j++]=E;for(F=0;F<=f;F++)K[F]=0;for(S=0;S<=143;)J[2*S+1]=8,S++,K[8]++;for(;S<=255;)J[2*S+1]=9,S++,K[9]++;for(;S<=279;)J[2*S+1]=7,S++,K[7]++;for(;S<=287;)J[2*S+1]=8,S++,K[8]++;for(ot(J,v+1,K),S=0;S<h;S++)_[2*S+1]=5,_[2*S]=nt(S,5);X=new Y(J,R,m+1,v,f),B=new Y(_,G,0,h,f),V=new Y(new Array(0),O,0,y,w)}(),D=!0),p.l_desc=new T(p.dyn_ltree,X),p.d_desc=new T(p.dyn_dtree,B),p.bl_desc=new T(p.bl_tree,V),p.bi_buf=0,p.bi_valid=0,tt(p)},e._tr_stored_block=b,e._tr_flush_block=function(p,S,F,N){var E,j,K=0;0<p.level?(p.strm.data_type===2&&(p.strm.data_type=function(W){var Q,rt=4093624447;for(Q=0;Q<=31;Q++,rt>>>=1)if(1&rt&&W.dyn_ltree[2*Q]!==0)return n;if(W.dyn_ltree[18]!==0||W.dyn_ltree[20]!==0||W.dyn_ltree[26]!==0)return s;for(Q=32;Q<m;Q++)if(W.dyn_ltree[2*Q]!==0)return s;return n}(p)),pt(p,p.l_desc),pt(p,p.d_desc),K=function(W){var Q;for(a(W,W.dyn_ltree,W.l_desc.max_code),a(W,W.dyn_dtree,W.d_desc.max_code),pt(W,W.bl_desc),Q=y-1;3<=Q&&W.bl_tree[2*I[Q]+1]===0;Q--);return W.opt_len+=3*(Q+1)+5+5+4,Q}(p),E=p.opt_len+3+7>>>3,(j=p.static_len+3+7>>>3)<=E&&(E=j)):E=j=F+5,F+4<=E&&S!==-1?b(p,S,F,N):p.strategy===4||j===E?(Z(p,2+(N?1:0),3),yt(p,J,_)):(Z(p,4+(N?1:0),3),function(W,Q,rt,et){var bt;for(Z(W,Q-257,5),Z(W,rt-1,5),Z(W,et-4,4),bt=0;bt<et;bt++)Z(W,W.bl_tree[2*I[bt]+1],3);L(W,W.dyn_ltree,Q-1),L(W,W.dyn_dtree,rt-1)}(p,p.l_desc.max_code+1,p.d_desc.max_code+1,K+1),yt(p,p.dyn_ltree,p.dyn_dtree)),tt(p),N&&it(p)},e._tr_tally=function(p,S,F){return p.pending_buf[p.d_buf+2*p.last_lit]=S>>>8&255,p.pending_buf[p.d_buf+2*p.last_lit+1]=255&S,p.pending_buf[p.l_buf+p.last_lit]=255&F,p.last_lit++,S===0?p.dyn_ltree[2*F]++:(p.matches++,S--,p.dyn_ltree[2*(o[F]+m+1)]++,p.dyn_dtree[2*A(S)]++),p.last_lit===p.lit_bufsize-1},e._tr_align=function(p){Z(p,2,3),H(p,k,J),function(S){S.bi_valid===16?(q(S,S.bi_buf),S.bi_buf=0,S.bi_valid=0):8<=S.bi_valid&&(S.pending_buf[S.pending++]=255&S.bi_buf,S.bi_buf>>=8,S.bi_valid-=8)}(p)}},{"../utils/common":41}],53:[function(r,t,e){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,t,e){(function(i){(function(n,s){"use strict";if(!n.setImmediate){var l,c,g,m,v=1,h={},y=!1,u=n.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(n);f=f&&f.setTimeout?f:n,l={}.toString.call(n.process)==="[object process]"?function(x){process.nextTick(function(){w(x)})}:function(){if(n.postMessage&&!n.importScripts){var x=!0,C=n.onmessage;return n.onmessage=function(){x=!1},n.postMessage("","*"),n.onmessage=C,x}}()?(m="setImmediate$"+Math.random()+"$",n.addEventListener?n.addEventListener("message",k,!1):n.attachEvent("onmessage",k),function(x){n.postMessage(m+x,"*")}):n.MessageChannel?((g=new MessageChannel).port1.onmessage=function(x){w(x.data)},function(x){g.port2.postMessage(x)}):u&&"onreadystatechange"in u.createElement("script")?(c=u.documentElement,function(x){var C=u.createElement("script");C.onreadystatechange=function(){w(x),C.onreadystatechange=null,c.removeChild(C),C=null},c.appendChild(C)}):function(x){setTimeout(w,0,x)},f.setImmediate=function(x){typeof x!="function"&&(x=new Function(""+x));for(var C=new Array(arguments.length-1),U=0;U<C.length;U++)C[U]=arguments[U+1];var R={callback:x,args:C};return h[v]=R,l(v),v++},f.clearImmediate=d}function d(x){delete h[x]}function w(x){if(y)setTimeout(w,0,x);else{var C=h[x];if(C){y=!0;try{(function(U){var R=U.callback,G=U.args;switch(G.length){case 0:R();break;case 1:R(G[0]);break;case 2:R(G[0],G[1]);break;case 3:R(G[0],G[1],G[2]);break;default:R.apply(s,G)}})(C)}finally{d(x),y=!1}}}}function k(x){x.source===n&&typeof x.data=="string"&&x.data.indexOf(m)===0&&w(+x.data.slice(m.length))}})(typeof self=="undefined"?i===void 0?this:i:self)}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[10])(10)})});function wi(r){let{width:t,height:e,data:i}=r,n=new Float32Array(t*e);for(let s=0;s<n.length;s++){let l=s*4,c=i[l],g=i[l+1],m=i[l+2],v=Math.max(c,g,m);n[s]=v/255}return n}function _i(r,t,e){let{x:i,y:n,width:s,height:l}=e;for(let c=0;c<l;c++)for(let g=0;g<s;g++){let m=((n+c)*r.width+(i+g))*4,v=c*s+g,h=t[v];if(h<.002)continue;h=Math.min(h,.99);let y=1-h;for(let u=0;u<3;u++){let d=(r.data[m+u]-h*255)/y;r.data[m+u]=Math.max(0,Math.min(255,Math.round(d)))}}}var ki="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAGVElEQVR4nMVYvXIbNxD+FvKMWInXmd2dK7MTO7sj9QKWS7qy/Ab2o/gNmCp0JyZ9dHaldJcqTHfnSSF1R7kwlYmwKRYA93BHmkrseMcjgzgA++HbH2BBxhhmBiB/RYgo+hkGSFv/ZOY3b94w89u3b6HEL8JEYCYATCAi2JYiQ8xMDADGWsvMbfVagm6ZLxKGPXr0qN/vJ0mSpqn0RzuU//Wu9MoyPqxmtqmXJYwxxpiAQzBF4x8/fiyN4XDYoZLA5LfEhtg0+glMIGZY6wABMMbs4CaiR8brkYIDwGg00uuEMUTQ1MYqPBRRYZjZ+q42nxEsaYiV5VOapkmSSLvX62VZprUyM0DiQACIGLCAESIAEINAAAEOcQdD4a+2FJqmhDd/YEVkMpmEtrU2igCocNHW13swRBQYcl0enxbHpzEhKo0xSZJEgLIsC4Q5HJaJ2Qg7kKBjwMJyCDciBBcw7fjSO4tQapdi5vF43IZ+cnISdh9Y0At2RoZWFNtLsxr8N6CUTgCaHq3g+Pg4TVO1FACSaDLmgMhYC8sEQzCu3/mQjNEMSTvoDs4b+nXny5cvo4lBJpNJmKj9z81VrtNhikCgTsRRfAklmurxeKx9JZIsy548eeITKJgAQwzXJlhDTAwDgrXkxxCD2GfqgEPa4rnBOlApFUC/39fR1CmTyWQwGAQrR8TonMRNjjYpTmPSmUnC8ODgQHqSJDk7O9uNBkCv15tOp4eHh8SQgBICiCGu49YnSUJOiLGJcG2ydmdwnRcvXuwwlpYkSabTaZS1vyimc7R2Se16z58/f/jw4Z5LA8iy7NmzZ8J76CQ25F2UGsEAJjxo5194q0fn9unp6fHx8f5oRCQ1nJ+fbxtA3HAjAmCMCaGuAQWgh4eH0+k0y7LGvPiU3CVXV1fz+by+WQkCJYaImKzL6SEN6uMpjBVMg8FgOp3GfnNPQADqup79MLv59AlWn75E/vAlf20ibmWg0Pn06dPJZNLr9e6nfLu8//Ahv/gFAEdcWEsgZnYpR3uM9KRpOplMGmb6SlLX9Ww2q29WyjH8+SI+pD0GQJIkJycn/8J/I4mWjaQoijzPb25uJJsjmAwqprIsG4/HbVZ2L/1fpCiKoijKqgTRBlCWZcPhcDQafUVfuZfUdb1cLpfL5cePf9Lr16/3zLz/g9T1quNy+F2FiYjSNB0Oh8Ph8HtRtV6vi6JYLpdVVbmb8t3dnSAbjUbRNfmbSlmWeZ6XHytEUQafEo0xR0dHUdjvG2X3Sd/Fb0We56t6BX8l2mTq6BCVnqOjo7Ozs29hRGGlqqrOr40CIKqeiGg8Hn/xcri/rG/XeZ7/evnrjjGbC3V05YC/BSRJ8urVq36/3zX7Hjaq63o+n19fX/upUqe5VxFok7UBtQ+T6XQ6GAz2Vd6Ssizn8/nt7a3ay1ZAYbMN520XkKenpx0B2E2SLOo+FEWxWPwMgMnC3/adejZMYLLS42r7oH4LGodpsVgURdHQuIcURbFYLDYlVKg9sCk5wpWNiHym9pUAEQGG6EAqSxhilRQWi0VZVmrz23yI5cPV1dX5TwsmWGYrb2TW36OJGjdXhryKxEeHvjR2Fgzz+bu6XnVgaHEmXhytEK0W1aUADJPjAL6CtPZv5rsGSvUKtv7r8/zdj+v1uoOUpsxms7qunT6+g1/TvTQCxE6XR2kBqxjyZo6K66gsAXB1fZ3neQdJSvI8X61WpNaMWCFuKNrkGuGGmMm95fhpvPkn/f6lAgAuLy/LstyGpq7r9+8d4rAr443qaln/ehHt1siv3dvt2B/RDpJms5lGE62gEy9az0XGcQCK3DL4DTPr0pPZEjPAZVlusoCSoihWqzpCHy7ODRXhbUTJly9oDr4fKDaV9NZJUrszPOjsI0a/FzfwNt4eHH+BSyICqK7rqqo0u0VRrFYridyN87L3pBYf7qvq3wqc3DMldJmiK06pgi8uLqQjAAorRG+p+zLUxks+z7rOkOzlIUy8yrAcQFVV3a4/ywBPmJsVMcTM3l/h9xDlLga4I1PDGaD7UNBPuCKBleUfy2gd+DOrPWubGHJJyD+L+LCTjEXEgH//2uSxhu1/Xzocy+VSL+2cUhrqLVZ/jTYL0IMtQEklT3/iWCutzUljDDNXVSVHRFWW7SOtccHag6V/AF1/slVRyOkZAAAAAElFTkSuQmCC";var Si="data:image/png;base64,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";function Ci(r,t){return r>1024&&t>1024?{logoSize:96,marginRight:64,marginBottom:64}:{logoSize:48,marginRight:32,marginBottom:32}}function Ii(r,t,e){let{logoSize:i,marginRight:n,marginBottom:s}=e;return{x:r-n-i,y:t-s-i,width:i,height:i}}var pe=class r{constructor(t){this.bgCaptures=t,this.alphaMaps={}}static async create(){let t=new Image,e=new Image;return await Promise.all([new Promise((i,n)=>{t.onload=i,t.onerror=n,t.src=ki}),new Promise((i,n)=>{e.onload=i,e.onerror=n,e.src=Si})]),new r({bg48:t,bg96:e})}async getAlphaMap(t){if(this.alphaMaps[t])return this.alphaMaps[t];let e=t===48?this.bgCaptures.bg48:this.bgCaptures.bg96,i=document.createElement("canvas");i.width=t,i.height=t;let n=i.getContext("2d");n.drawImage(e,0,0);let s=n.getImageData(0,0,t,t),l=wi(s);return this.alphaMaps[t]=l,l}async removeWatermarkFromImage(t){let e=document.createElement("canvas");e.width=t.width,e.height=t.height;let i=e.getContext("2d");i.drawImage(t,0,0);let n=i.getImageData(0,0,e.width,e.height),s=Ci(e.width,e.height),l=Ii(e.width,e.height,s),c=await this.getAlphaMap(s.logoSize);return _i(n,c,l),i.putImageData(n,0,0),e}getWatermarkInfo(t,e){let i=Ci(t,e),n=Ii(t,e,i);return{size:i.logoSize,position:n,config:i}}};var Pe=typeof self!="undefined"?self:global,oe=typeof navigator!="undefined",_r=oe&&typeof HTMLImageElement=="undefined",ye=!(typeof global=="undefined"||typeof process=="undefined"||!process.versions||!process.versions.node),Te=Pe.Buffer,me=Pe.BigInt,De=!!Te,kr=r=>r;function be(r,t=kr){if(ye)try{return typeof Ot=="function"?Promise.resolve(t(Ot(r))):import(r).then(t)}catch(e){console.warn(`Couldn't load ${r}`)}}var ii=Pe.fetch,Sr=r=>ii=r;if(!Pe.fetch){let r=be("http",i=>i),t=be("https",i=>i),e=(i,{headers:n}={})=>new Promise(async(s,l)=>{let{port:c,hostname:g,pathname:m,protocol:v,search:h}=new URL(i),y={method:"GET",hostname:g,path:encodeURI(m)+h,headers:n};c!==""&&(y.port=Number(c));let u=(v==="https:"?await t:await r).request(y,f=>{if(f.statusCode===301||f.statusCode===302){let d=new URL(f.headers.location,i).toString();return e(d,{headers:n}).then(s).catch(l)}s({status:f.statusCode,arrayBuffer:()=>new Promise(d=>{let w=[];f.on("data",k=>w.push(k)),f.on("end",()=>d(Buffer.concat(w)))})})});u.on("error",l),u.end()});Sr(e)}function $(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}var ve=r=>Mi(r)?void 0:r,Cr=r=>r!==void 0;function Mi(r){return r===void 0||(r instanceof Map?r.size===0:Object.values(r).filter(Cr).length===0)}function dt(r){let t=new Error(r);throw delete t.stack,t}function Bt(r){return(r=function(t){for(;t.endsWith("\0");)t=t.slice(0,-1);return t}(r).trim())===""?void 0:r}function Ve(r){let t=function(e){let i=0;return e.ifd0.enabled&&(i+=1024),e.exif.enabled&&(i+=2048),e.makerNote&&(i+=2048),e.userComment&&(i+=1024),e.gps.enabled&&(i+=512),e.interop.enabled&&(i+=100),e.ifd1.enabled&&(i+=1024),i+2048}(r);return r.jfif.enabled&&(t+=50),r.xmp.enabled&&(t+=2e4),r.iptc.enabled&&(t+=14e3),r.icc.enabled&&(t+=6e3),t}var Ze=r=>String.fromCharCode.apply(null,r),xi=typeof TextDecoder!="undefined"?new TextDecoder("utf-8"):void 0;function Ni(r){return xi?xi.decode(r):De?Buffer.from(r).toString("utf8"):decodeURIComponent(escape(Ze(r)))}var _t=class r{static from(t,e){return t instanceof this&&t.le===e?t:new r(t,void 0,void 0,e)}constructor(t,e=0,i,n){if(typeof n=="boolean"&&(this.le=n),Array.isArray(t)&&(t=new Uint8Array(t)),t===0)this.byteOffset=0,this.byteLength=0;else if(t instanceof ArrayBuffer){i===void 0&&(i=t.byteLength-e);let s=new DataView(t,e,i);this._swapDataView(s)}else if(t instanceof Uint8Array||t instanceof DataView||t instanceof r){i===void 0&&(i=t.byteLength-e),(e+=t.byteOffset)+i>t.byteOffset+t.byteLength&&dt("Creating view outside of available memory in ArrayBuffer");let s=new DataView(t.buffer,e,i);this._swapDataView(s)}else if(typeof t=="number"){let s=new DataView(new ArrayBuffer(t));this._swapDataView(s)}else dt("Invalid input argument for BufferView: "+t)}_swapArrayBuffer(t){this._swapDataView(new DataView(t))}_swapBuffer(t){this._swapDataView(new DataView(t.buffer,t.byteOffset,t.byteLength))}_swapDataView(t){this.dataView=t,this.buffer=t.buffer,this.byteOffset=t.byteOffset,this.byteLength=t.byteLength}_lengthToEnd(t){return this.byteLength-t}set(t,e,i=r){return t instanceof DataView||t instanceof r?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||dt("BufferView.set(): Invalid data argument."),this.toUint8().set(t,e),new i(this,e,t.byteLength)}subarray(t,e){return e=e||this._lengthToEnd(t),new r(this,t,e)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(t,e){return new Uint8Array(this.buffer,this.byteOffset+t,e)}getString(t=0,e=this.byteLength){return Ni(this.getUint8Array(t,e))}getLatin1String(t=0,e=this.byteLength){let i=this.getUint8Array(t,e);return Ze(i)}getUnicodeString(t=0,e=this.byteLength){let i=[];for(let n=0;n<e&&t+n<this.byteLength;n+=2)i.push(this.getUint16(t+n));return Ze(i)}getInt8(t){return this.dataView.getInt8(t)}getUint8(t){return this.dataView.getUint8(t)}getInt16(t,e=this.le){return this.dataView.getInt16(t,e)}getInt32(t,e=this.le){return this.dataView.getInt32(t,e)}getUint16(t,e=this.le){return this.dataView.getUint16(t,e)}getUint32(t,e=this.le){return this.dataView.getUint32(t,e)}getFloat32(t,e=this.le){return this.dataView.getFloat32(t,e)}getFloat64(t,e=this.le){return this.dataView.getFloat64(t,e)}getFloat(t,e=this.le){return this.dataView.getFloat32(t,e)}getDouble(t,e=this.le){return this.dataView.getFloat64(t,e)}getUintBytes(t,e,i){switch(e){case 1:return this.getUint8(t,i);case 2:return this.getUint16(t,i);case 4:return this.getUint32(t,i);case 8:return this.getUint64&&this.getUint64(t,i)}}getUint(t,e,i){switch(e){case 8:return this.getUint8(t,i);case 16:return this.getUint16(t,i);case 32:return this.getUint32(t,i);case 64:return this.getUint64&&this.getUint64(t,i)}}toString(t){return this.dataView.toString(t,this.constructor.name)}ensureChunk(){}};function Xe(r,t){dt(`${r} '${t}' was not loaded, try using full build of exifr.`)}var le=class extends Map{constructor(t){super(),this.kind=t}get(t,e){return this.has(t)||Xe(this.kind,t),e&&(t in e||function(i,n){dt(`Unknown ${i} '${n}'.`)}(this.kind,t),e[t].enabled||Xe(this.kind,t)),super.get(t)}keyList(){return Array.from(this.keys())}},kt=new le("file parser"),ct=new le("segment parser"),Ct=new le("file reader");function Ir(r,t){return typeof r=="string"?Ai(r,t):oe&&!_r&&r instanceof HTMLImageElement?Ai(r.src,t):r instanceof Uint8Array||r instanceof ArrayBuffer||r instanceof DataView?new _t(r):oe&&r instanceof Blob?Ke(r,t,"blob",Nt):void dt("Invalid input argument")}function Ai(r,t){return(e=r).startsWith("data:")||e.length>1e4?Ye(r,t,"base64"):ye&&r.includes("://")?Ke(r,t,"url",Mt):ye?Ye(r,t,"fs"):oe?Ke(r,t,"url",Mt):void dt("Invalid input argument");var e}async function Ke(r,t,e,i){return Ct.has(e)?Ye(r,t,e):i?async function(n,s){let l=await s(n);return new _t(l)}(r,i):void dt(`Parser ${e} is not loaded`)}async function Ye(r,t,e){let i=new(Ct.get(e))(r,t);return await i.read(),i}var Mt=r=>ii(r).then(t=>t.arrayBuffer()),Nt=r=>new Promise((t,e)=>{let i=new FileReader;i.onloadend=()=>t(i.result||new ArrayBuffer),i.onerror=e,i.readAsArrayBuffer(r)}),Je=class extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}};function ut(r,t,e){let i=new Je;for(let[n,s]of e)i.set(n,s);if(Array.isArray(t))for(let n of t)r.set(n,i);else r.set(t,i);return i}function Gt(r,t,e){let i,n=r.get(t);for(i of e)n.set(i[0],i[1])}var ft=new Map,vt=new Map,Rt=new Map,Pt=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Jt=["jfif","xmp","icc","iptc","ihdr"],jt=["tiff",...Jt],lt=["ifd0","ifd1","exif","gps","interop"],Tt=[...jt,...lt],Dt=["makerNote","userComment"],qt=["translateKeys","translateValues","reviveValues","multiSegment"],zt=[...qt,"sanitize","mergeOutput","silentErrors"],we=class{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}},Lt=class extends we{get needed(){return this.enabled||this.deps.size>0}constructor(t,e,i,n){if(super(),$(this,"enabled",!1),$(this,"skip",new Set),$(this,"pick",new Set),$(this,"deps",new Set),$(this,"translateKeys",!1),$(this,"translateValues",!1),$(this,"reviveValues",!1),this.key=t,this.enabled=e,this.parse=this.enabled,this.applyInheritables(n),this.canBeFiltered=lt.includes(t),this.canBeFiltered&&(this.dict=ft.get(t)),i!==void 0)if(Array.isArray(i))this.parse=this.enabled=!0,this.canBeFiltered&&i.length>0&&this.translateTagSet(i,this.pick);else if(typeof i=="object"){if(this.enabled=!0,this.parse=i.parse!==!1,this.canBeFiltered){let{pick:s,skip:l}=i;s&&s.length>0&&this.translateTagSet(s,this.pick),l&&l.length>0&&this.translateTagSet(l,this.skip)}this.applyInheritables(i)}else i===!0||i===!1?this.parse=this.enabled=i:dt(`Invalid options argument: ${i}`)}applyInheritables(t){let e,i;for(e of qt)i=t[e],i!==void 0&&(this[e]=i)}translateTagSet(t,e){if(this.dict){let i,n,{tagKeys:s,tagValues:l}=this.dict;for(i of t)typeof i=="string"?(n=l.indexOf(i),n===-1&&(n=s.indexOf(Number(i))),n!==-1&&e.add(Number(s[n]))):e.add(i)}else for(let i of t)e.add(i)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,_e(this.pick,this.deps)):this.enabled&&this.pick.size>0&&_e(this.pick,this.deps)}},mt={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Ei=new Map,Et=class extends we{static useCached(t){let e=Ei.get(t);return e!==void 0||(e=new this(t),Ei.set(t,e)),e}constructor(t){super(),t===!0?this.setupFromTrue():t===void 0?this.setupFromUndefined():Array.isArray(t)?this.setupFromArray(t):typeof t=="object"?this.setupFromObject(t):dt(`Invalid options argument ${t}`),this.firstChunkSize===void 0&&(this.firstChunkSize=oe?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let t;for(t of Pt)this[t]=mt[t];for(t of zt)this[t]=mt[t];for(t of Dt)this[t]=mt[t];for(t of Tt)this[t]=new Lt(t,mt[t],void 0,this)}setupFromTrue(){let t;for(t of Pt)this[t]=mt[t];for(t of zt)this[t]=mt[t];for(t of Dt)this[t]=!0;for(t of Tt)this[t]=new Lt(t,!0,void 0,this)}setupFromArray(t){let e;for(e of Pt)this[e]=mt[e];for(e of zt)this[e]=mt[e];for(e of Dt)this[e]=mt[e];for(e of Tt)this[e]=new Lt(e,!1,void 0,this);this.setupGlobalFilters(t,void 0,lt)}setupFromObject(t){let e;for(e of(lt.ifd0=lt.ifd0||lt.image,lt.ifd1=lt.ifd1||lt.thumbnail,Object.assign(this,t),Pt))this[e]=je(t[e],mt[e]);for(e of zt)this[e]=je(t[e],mt[e]);for(e of Dt)this[e]=je(t[e],mt[e]);for(e of jt)this[e]=new Lt(e,mt[e],t[e],this);for(e of lt)this[e]=new Lt(e,mt[e],t[e],this.tiff);this.setupGlobalFilters(t.pick,t.skip,lt,Tt),t.tiff===!0?this.batchEnableWithBool(lt,!0):t.tiff===!1?this.batchEnableWithUserValue(lt,t):Array.isArray(t.tiff)?this.setupGlobalFilters(t.tiff,void 0,lt):typeof t.tiff=="object"&&this.setupGlobalFilters(t.tiff.pick,t.tiff.skip,lt)}batchEnableWithBool(t,e){for(let i of t)this[i].enabled=e}batchEnableWithUserValue(t,e){for(let i of t){let n=e[i];this[i].enabled=n!==!1&&n!==void 0}}setupGlobalFilters(t,e,i,n=i){if(t&&t.length){for(let l of n)this[l].enabled=!1;let s=Oi(t,i);for(let[l,c]of s)_e(this[l].pick,c),this[l].enabled=!0}else if(e&&e.length){let s=Oi(e,i);for(let[l,c]of s)_e(this[l].skip,c)}}filterNestedSegmentTags(){let{ifd0:t,exif:e,xmp:i,iptc:n,icc:s}=this;this.makerNote?e.deps.add(37500):e.skip.add(37500),this.userComment?e.deps.add(37510):e.skip.add(37510),i.enabled||t.skip.add(700),n.enabled||t.skip.add(33723),s.enabled||t.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:t,exif:e,gps:i,interop:n}=this;n.needed&&(e.deps.add(40965),t.deps.add(40965)),e.needed&&t.deps.add(34665),i.needed&&t.deps.add(34853),this.tiff.enabled=lt.some(s=>this[s].enabled===!0)||this.makerNote||this.userComment;for(let s of lt)this[s].finalizeFilters()}get onlyTiff(){return!Jt.map(t=>this[t].enabled).some(t=>t===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let t of jt)this[t].enabled&&!ct.has(t)&&Xe("segment parser",t)}};function Oi(r,t){let e,i,n,s,l=[];for(n of t){for(s of(e=ft.get(n),i=[],e))(r.includes(s[0])||r.includes(s[1]))&&i.push(s[0]);i.length&&l.push([n,i])}return l}function je(r,t){return r!==void 0?r:t!==void 0?t:void 0}function _e(r,t){for(let e of t)r.add(e)}$(Et,"default",mt);var St=class{constructor(t){$(this,"parsers",{}),$(this,"output",{}),$(this,"errors",[]),$(this,"pushToErrors",e=>this.errors.push(e)),this.options=Et.useCached(t)}async read(t){this.file=await Ir(t,this.options)}setup(){if(this.fileParser)return;let{file:t}=this,e=t.getUint16(0);for(let[i,n]of kt)if(n.canHandle(t,e))return this.fileParser=new n(this.options,this.file,this.parsers),t[i]=!0;this.file.close&&this.file.close(),dt("Unknown file format")}async parse(){let{output:t,errors:e}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),e.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&e.length>0&&(t.errors=e),ve(t)}async executeParsers(){let{output:t}=this;await this.fileParser.parse();let e=Object.values(this.parsers).map(async i=>{let n=await i.parse();i.assignToOutput(t,n)});this.options.silentErrors&&(e=e.map(i=>i.catch(this.pushToErrors))),await Promise.all(e)}async extractThumbnail(){this.setup();let{options:t,file:e}=this,i=ct.get("tiff",t);var n;if(e.tiff?n={start:0,type:"tiff"}:e.jpeg&&(n=await this.fileParser.getOrFindSegment("tiff")),n===void 0)return;let s=await this.fileParser.ensureSegmentChunk(n),l=this.parsers.tiff=new i(s,t,e),c=await l.extractThumbnail();return e.close&&e.close(),c}};async function ze(r,t){let e=new St(t);return await e.read(r),e.parse()}var xr=Object.freeze({__proto__:null,parse:ze,Exifr:St,fileParsers:kt,segmentParsers:ct,fileReaders:Ct,tagKeys:ft,tagValues:vt,tagRevivers:Rt,createDictionary:ut,extendDictionary:Gt,fetchUrlAsArrayBuffer:Mt,readBlobAsArrayBuffer:Nt,chunkedProps:Pt,otherSegments:Jt,segments:jt,tiffBlocks:lt,segmentsAndBlocks:Tt,tiffExtractables:Dt,inheritables:qt,allFormatters:zt,Options:Et}),Kt=class{constructor(t,e,i){$(this,"errors",[]),$(this,"ensureSegmentChunk",async n=>{let s=n.start,l=n.size||65536;if(this.file.chunked)if(this.file.available(s,l))n.chunk=this.file.subarray(s,l);else try{n.chunk=await this.file.readChunk(s,l)}catch(c){dt(`Couldn't read segment: ${JSON.stringify(n)}. ${c.message}`)}else this.file.byteLength>s+l?n.chunk=this.file.subarray(s,l):n.size===void 0?n.chunk=this.file.subarray(s):dt("Segment unreachable: "+JSON.stringify(n));return n.chunk}),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=e,this.parsers=i}injectSegment(t,e){this.options[t].enabled&&this.createParser(t,e)}createParser(t,e){let i=new(ct.get(t))(e,this.options,this.file);return this.parsers[t]=i}createParsers(t){for(let e of t){let{type:i,chunk:n}=e,s=this.options[i];if(s&&s.enabled){let l=this.parsers[i];l&&l.append||l||this.createParser(i,n)}}}async readSegments(t){let e=t.map(this.ensureSegmentChunk);await Promise.all(e)}},gt=class{static findPosition(t,e){let i=t.getUint16(e+2)+2,n=typeof this.headerLength=="function"?this.headerLength(t,e,i):this.headerLength,s=e+n,l=i-n;return{offset:e,length:i,headerLength:n,start:s,size:l,end:s+l}}static parse(t,e={}){return new this(t,new Et({[this.type]:e}),t).parse()}normalizeInput(t){return t instanceof _t?t:new _t(t)}constructor(t,e={},i){$(this,"errors",[]),$(this,"raw",new Map),$(this,"handleError",n=>{if(!this.options.silentErrors)throw n;this.errors.push(n.message)}),this.chunk=this.normalizeInput(t),this.file=i,this.type=this.constructor.type,this.globalOptions=this.options=e,this.localOptions=e[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(t,e){let i=Rt.get(e),n=vt.get(e),s=ft.get(e),l=this.options[e],c=l.reviveValues&&!!i,g=l.translateValues&&!!n,m=l.translateKeys&&!!s,v={};for(let[h,y]of t)c&&i.has(h)?y=i.get(h)(y):g&&n.has(h)&&(y=this.translateValue(y,n.get(h))),m&&s.has(h)&&(h=s.get(h)||h),v[h]=y;return v}translateValue(t,e){return e[t]||e.DEFAULT||t}assignToOutput(t,e){this.assignObjectToOutput(t,this.constructor.type,e)}assignObjectToOutput(t,e,i){if(this.globalOptions.mergeOutput)return Object.assign(t,i);t[e]?Object.assign(t[e],i):t[e]=i}};$(gt,"headerLength",4),$(gt,"type",void 0),$(gt,"multiSegment",!1),$(gt,"canHandle",()=>!1);function Ar(r){return r===192||r===194||r===196||r===219||r===221||r===218||r===254}function Er(r){return r>=224&&r<=239}function Or(r,t,e){for(let[i,n]of ct)if(n.canHandle(r,t,e))return i}var ke=class extends Kt{constructor(...t){super(...t),$(this,"appSegments",[]),$(this,"jpegSegments",[]),$(this,"unknownSegments",[])}static canHandle(t,e){return e===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(t){t===!0?(this.findAll=!0,this.wanted=new Set(ct.keyList())):(t=t===void 0?ct.keyList().filter(e=>this.options[e].enabled):t.filter(e=>this.options[e].enabled&&ct.has(e)),this.findAll=!1,this.remaining=new Set(t),this.wanted=new Set(t)),this.unfinishedMultiSegment=!1}async findAppSegments(t=0,e){this.setupSegmentFinderArgs(e);let{file:i,findAll:n,wanted:s,remaining:l}=this;if(!n&&this.file.chunked&&(n=Array.from(s).some(c=>{let g=ct.get(c),m=this.options[c];return g.multiSegment&&m.multiSegment}),n&&await this.file.readWhole()),t=this.findAppSegmentsInRange(t,i.byteLength),!this.options.onlyTiff&&i.chunked){let c=!1;for(;l.size>0&&!c&&(i.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:g}=i,m=this.appSegments.some(v=>!this.file.available(v.offset||v.start,v.length||v.size));if(c=t>g&&!m?!await i.readNextChunk(t):!await i.readNextChunk(g),(t=this.findAppSegmentsInRange(t,i.byteLength))===void 0)return}}}findAppSegmentsInRange(t,e){e-=2;let i,n,s,l,c,g,{file:m,findAll:v,wanted:h,remaining:y,options:u}=this;for(;t<e;t++)if(m.getUint8(t)===255){if(i=m.getUint8(t+1),Er(i)){if(n=m.getUint16(t+2),s=Or(m,t,n),s&&h.has(s)&&(l=ct.get(s),c=l.findPosition(m,t),g=u[s],c.type=s,this.appSegments.push(c),!v&&(l.multiSegment&&g.multiSegment?(this.unfinishedMultiSegment=c.chunkNumber<c.chunkCount,this.unfinishedMultiSegment||y.delete(s)):y.delete(s),y.size===0)))break;u.recordUnknownSegments&&(c=gt.findPosition(m,t),c.marker=i,this.unknownSegments.push(c)),t+=n+1}else if(Ar(i)){if(n=m.getUint16(t+2),i===218&&u.stopAfterSos!==!1)return;u.recordJpegSegments&&this.jpegSegments.push({offset:t,length:n,marker:i}),t+=n+1}}return t}mergeMultiSegments(){if(!this.appSegments.some(e=>e.multiSegment))return;let t=function(e,i){let n,s,l,c=new Map;for(let g=0;g<e.length;g++)n=e[g],s=n[i],c.has(s)?l=c.get(s):c.set(s,l=[]),l.push(n);return Array.from(c)}(this.appSegments,"type");this.mergedAppSegments=t.map(([e,i])=>{let n=ct.get(e,this.options);return n.handleMultiSegments?{type:e,chunk:n.handleMultiSegments(i)}:i[0]})}getSegment(t){return this.appSegments.find(e=>e.type===t)}async getOrFindSegment(t){let e=this.getSegment(t);return e===void 0&&(await this.findAppSegments(0,[t]),e=this.getSegment(t)),e}};$(ke,"type","jpeg"),kt.set("jpeg",ke);var Pr=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4],qe=class extends gt{parseHeader(){var t=this.chunk.getUint16();t===18761?this.le=!0:t===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(t,e,i=new Map){let{pick:n,skip:s}=this.options[e];n=new Set(n);let l=n.size>0,c=s.size===0,g=this.chunk.getUint16(t);t+=2;for(let m=0;m<g;m++){let v=this.chunk.getUint16(t);if(l){if(n.has(v)&&(i.set(v,this.parseTag(t,v,e)),n.delete(v),n.size===0))break}else!c&&s.has(v)||i.set(v,this.parseTag(t,v,e));t+=12}return i}parseTag(t,e,i){let{chunk:n}=this,s=n.getUint16(t+2),l=n.getUint32(t+4),c=Pr[s];if(c*l<=4?t+=8:t=n.getUint32(t+8),(s<1||s>13)&&dt(`Invalid TIFF value type. block: ${i.toUpperCase()}, tag: ${e.toString(16)}, type: ${s}, offset ${t}`),t>n.byteLength&&dt(`Invalid TIFF value offset. block: ${i.toUpperCase()}, tag: ${e.toString(16)}, type: ${s}, offset ${t} is outside of chunk size ${n.byteLength}`),s===1)return n.getUint8Array(t,l);if(s===2)return Bt(n.getString(t,l));if(s===7)return n.getUint8Array(t,l);if(l===1)return this.parseTagValue(s,t);{let g=new(function(v){switch(v){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(s))(l),m=c;for(let v=0;v<l;v++)g[v]=this.parseTagValue(s,t),t+=m;return g}}parseTagValue(t,e){let{chunk:i}=this;switch(t){case 1:return i.getUint8(e);case 3:return i.getUint16(e);case 4:return i.getUint32(e);case 5:return i.getUint32(e)/i.getUint32(e+4);case 6:return i.getInt8(e);case 8:return i.getInt16(e);case 9:return i.getInt32(e);case 10:return i.getInt32(e)/i.getInt32(e+4);case 11:return i.getFloat(e);case 12:return i.getDouble(e);case 13:return i.getUint32(e);default:dt(`Invalid tiff type ${t}`)}}},re=class extends qe{static canHandle(t,e){return t.getUint8(e+1)===225&&t.getUint32(e+4)===1165519206&&t.getUint16(e+8)===0}async parse(){this.parseHeader();let{options:t}=this;return t.ifd0.enabled&&await this.parseIfd0Block(),t.exif.enabled&&await this.safeParse("parseExifBlock"),t.gps.enabled&&await this.safeParse("parseGpsBlock"),t.interop.enabled&&await this.safeParse("parseInteropBlock"),t.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(t){let e=this[t]();return e.catch!==void 0&&(e=e.catch(this.handleError)),e}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let t=this.chunk.getUint16(this.ifd0Offset),e=this.ifd0Offset+2+12*t;this.ifd1Offset=this.chunk.getUint32(e)}}parseBlock(t,e){let i=new Map;return this[e]=i,this.parseTags(t,e,i),i}async parseIfd0Block(){if(this.ifd0)return;let{file:t}=this;this.findIfd0Offset(),this.ifd0Offset<8&&dt("Malformed EXIF data"),!t.chunked&&this.ifd0Offset>t.byteLength&&dt(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${t.byteLength}`),t.tiff&&await t.ensureChunk(this.ifd0Offset,Ve(this.options));let e=this.parseBlock(this.ifd0Offset,"ifd0");return e.size!==0?(this.exifOffset=e.get(34665),this.interopOffset=e.get(40965),this.gpsOffset=e.get(34853),this.xmp=e.get(700),this.iptc=e.get(33723),this.icc=e.get(34675),this.options.sanitize&&(e.delete(34665),e.delete(40965),e.delete(34853),e.delete(700),e.delete(33723),e.delete(34675)),e):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,Ve(this.options));let t=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=t.get(40965)),this.makerNote=t.get(37500),this.userComment=t.get(37510),this.options.sanitize&&(t.delete(40965),t.delete(37500),t.delete(37510)),this.unpack(t,41728),this.unpack(t,41729),t}unpack(t,e){let i=t.get(e);i&&i.length===1&&t.set(e,i[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let t=this.parseBlock(this.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",Pi(...t.get(2),t.get(1))),t.set("longitude",Pi(...t.get(4),t.get(3)))),t}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(t=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||t))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let t=this.ifd1.get(513),e=this.ifd1.get(514);return this.chunk.getUint8Array(t,e)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let t,e,i,n={};for(e of lt)if(t=this[e],!Mi(t))if(i=this.canTranslate?this.translateBlock(t,e):Object.fromEntries(t),this.options.mergeOutput){if(e==="ifd1")continue;Object.assign(n,i)}else n[e]=i;return this.makerNote&&(n.makerNote=this.makerNote),this.userComment&&(n.userComment=this.userComment),n}assignToOutput(t,e){if(this.globalOptions.mergeOutput)Object.assign(t,e);else for(let[i,n]of Object.entries(e))this.assignObjectToOutput(t,i,n)}};function Pi(r,t,e,i){var n=r+t/60+e/3600;return i!=="S"&&i!=="W"||(n*=-1),n}$(re,"type","tiff"),$(re,"headerLength",10),ct.set("tiff",re);var Tr=Object.freeze({__proto__:null,default:xr,Exifr:St,fileParsers:kt,segmentParsers:ct,fileReaders:Ct,tagKeys:ft,tagValues:vt,tagRevivers:Rt,createDictionary:ut,extendDictionary:Gt,fetchUrlAsArrayBuffer:Mt,readBlobAsArrayBuffer:Nt,chunkedProps:Pt,otherSegments:Jt,segments:jt,tiffBlocks:lt,segmentsAndBlocks:Tt,tiffExtractables:Dt,inheritables:qt,allFormatters:zt,Options:Et,parse:ze}),ri={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},ni=Object.assign({},ri,{firstChunkSize:4e4,gps:[1,2,3,4]});async function Gi(r){let t=new St(ni);await t.read(r);let e=await t.parse();if(e&&e.gps){let{latitude:i,longitude:n}=e.gps;return{latitude:i,longitude:n}}}var si=Object.assign({},ri,{tiff:!1,ifd1:!0,mergeOutput:!1});async function ji(r){let t=new St(si);await t.read(r);let e=await t.extractThumbnail();return e&&De?Te.from(e):e}async function Wi(r){let t=await this.thumbnail(r);if(t!==void 0){let e=new Blob([t]);return URL.createObjectURL(e)}}var ai=Object.assign({},ri,{firstChunkSize:4e4,ifd0:[274]});async function oi(r){let t=new St(ai);await t.read(r);let e=await t.parse();if(e&&e.ifd0)return e.ifd0[274]}var li=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}}),Ut=!0,Ft=!0;if(typeof navigator=="object"){let r=navigator.userAgent;if(r.includes("iPad")||r.includes("iPhone")){let t=r.match(/OS (\d+)_(\d+)/);if(t){let[,e,i]=t;Ut=Number(e)+.1*Number(i)<13.4,Ft=!1}}else if(r.includes("OS X 10")){let[,t]=r.match(/OS X 10[_.](\d+)/);Ut=Ft=Number(t)<15}if(r.includes("Chrome/")){let[,t]=r.match(/Chrome\/(\d+)/);Ut=Ft=Number(t)<81}else if(r.includes("Firefox/")){let[,t]=r.match(/Firefox\/(\d+)/);Ut=Ft=Number(t)<77}}async function Hi(r){let t=await oi(r);return Object.assign({canvas:Ut,css:Ft},li[t])}var Qe=class extends _t{constructor(...t){super(...t),$(this,"ranges",new $e),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(t,e,i){if(t===0&&this.byteLength===0&&i){let n=new DataView(i.buffer||i,i.byteOffset,i.byteLength);this._swapDataView(n)}else{let n=t+e;if(n>this.byteLength){let{dataView:s}=this._extend(n);this._swapDataView(s)}}}_extend(t){let e;e=De?Te.allocUnsafe(t):new Uint8Array(t);let i=new DataView(e.buffer,e.byteOffset,e.byteLength);return e.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:e,dataView:i}}subarray(t,e,i=!1){return e=e||this._lengthToEnd(t),i&&this._tryExtend(t,e),this.ranges.add(t,e),super.subarray(t,e)}set(t,e,i=!1){i&&this._tryExtend(e,t.byteLength,t);let n=super.set(t,e);return this.ranges.add(e,n.byteLength),n}async ensureChunk(t,e){this.chunked&&(this.ranges.available(t,e)||await this.readChunk(t,e))}available(t,e){return this.ranges.available(t,e)}},$e=class{constructor(){$(this,"list",[])}get length(){return this.list.length}add(t,e,i=0){let n=t+e,s=this.list.filter(l=>Ti(t,l.offset,n)||Ti(t,l.end,n));if(s.length>0){t=Math.min(t,...s.map(c=>c.offset)),n=Math.max(n,...s.map(c=>c.end)),e=n-t;let l=s.shift();l.offset=t,l.length=e,l.end=n,this.list=this.list.filter(c=>!s.includes(c))}else this.list.push({offset:t,length:e,end:n})}available(t,e){let i=t+e;return this.list.some(n=>n.offset<=t&&i<=n.end)}};function Ti(r,t,e){return r<=t&&t<=e}var Yt=class extends Qe{constructor(t,e){super(0),$(this,"chunksRead",0),this.input=t,this.options=e}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(t=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let e=this.options.chunkSize,i=await this.readChunk(t,e);return!!i&&i.byteLength===e}async readChunk(t,e){if(this.chunksRead++,(e=this.safeWrapAddress(t,e))!==0)return this._readChunk(t,e)}safeWrapAddress(t,e){return this.size!==void 0&&t+e>this.size?Math.max(0,this.size-t):e}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}};Ct.set("blob",class extends Yt{async readWhole(){this.chunked=!1;let r=await Nt(this.input);this._swapArrayBuffer(r)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(r,t){let e=t?r+t:void 0,i=this.input.slice(r,e),n=await Nt(i);return this.set(n,r,!0)}});var Dr=Object.freeze({__proto__:null,default:Tr,Exifr:St,fileParsers:kt,segmentParsers:ct,fileReaders:Ct,tagKeys:ft,tagValues:vt,tagRevivers:Rt,createDictionary:ut,extendDictionary:Gt,fetchUrlAsArrayBuffer:Mt,readBlobAsArrayBuffer:Nt,chunkedProps:Pt,otherSegments:Jt,segments:jt,tiffBlocks:lt,segmentsAndBlocks:Tt,tiffExtractables:Dt,inheritables:qt,allFormatters:zt,Options:Et,parse:ze,gpsOnlyOptions:ni,gps:Gi,thumbnailOnlyOptions:si,thumbnail:ji,thumbnailUrl:Wi,orientationOnlyOptions:ai,orientation:oi,rotations:li,get rotateCanvas(){return Ut},get rotateCss(){return Ft},rotation:Hi});Ct.set("url",class extends Yt{async readWhole(){this.chunked=!1;let r=await Mt(this.input);r instanceof ArrayBuffer?this._swapArrayBuffer(r):r instanceof Uint8Array&&this._swapBuffer(r)}async _readChunk(r,t){let e=t?r+t-1:void 0,i=this.options.httpHeaders||{};(r||e)&&(i.range=`bytes=${[r,e].join("-")}`);let n=await ii(this.input,{headers:i}),s=await n.arrayBuffer(),l=s.byteLength;if(n.status!==416)return l!==t&&(this.size=r+l),this.set(s,r,!0)}});_t.prototype.getUint64=function(r){let t=this.getUint32(r),e=this.getUint32(r+4);return t<1048575?t<<32|e:typeof me!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),me(t)<<me(32)|me(e)):void dt("Trying to read 64b value but JS can only handle 53b numbers.")};var ti=class extends Kt{parseBoxes(t=0){let e=[];for(;t<this.file.byteLength-4;){let i=this.parseBoxHead(t);if(e.push(i),i.length===0)break;t+=i.length}return e}parseSubBoxes(t){t.boxes=this.parseBoxes(t.start)}findBox(t,e){return t.boxes===void 0&&this.parseSubBoxes(t),t.boxes.find(i=>i.kind===e)}parseBoxHead(t){let e=this.file.getUint32(t),i=this.file.getString(t+4,4),n=t+8;return e===1&&(e=this.file.getUint64(t+8),n+=8),{offset:t,length:e,kind:i,start:n}}parseBoxFullHead(t){if(t.version!==void 0)return;let e=this.file.getUint32(t.start);t.version=e>>24,t.start+=4}},Se=class extends ti{static canHandle(t,e){if(e!==0)return!1;let i=t.getUint16(2);if(i>50)return!1;let n=16,s=[];for(;n<i;)s.push(t.getString(n,4)),n+=4;return s.includes(this.type)}async parse(){let t=this.file.getUint32(0),e=this.parseBoxHead(t);for(;e.kind!=="meta";)t+=e.length,await this.file.ensureChunk(t,16),e=this.parseBoxHead(t);await this.file.ensureChunk(e.offset,e.length),this.parseBoxFullHead(e),this.parseSubBoxes(e),this.options.icc.enabled&&await this.findIcc(e),this.options.tiff.enabled&&await this.findExif(e)}async registerSegment(t,e,i){await this.file.ensureChunk(e,i);let n=this.file.subarray(e,i);this.createParser(t,n)}async findIcc(t){let e=this.findBox(t,"iprp");if(e===void 0)return;let i=this.findBox(e,"ipco");if(i===void 0)return;let n=this.findBox(i,"colr");n!==void 0&&await this.registerSegment("icc",n.offset+12,n.length)}async findExif(t){let e=this.findBox(t,"iinf");if(e===void 0)return;let i=this.findBox(t,"iloc");if(i===void 0)return;let n=this.findExifLocIdInIinf(e),s=this.findExtentInIloc(i,n);if(s===void 0)return;let[l,c]=s;await this.file.ensureChunk(l,c);let g=4+this.file.getUint32(l);l+=g,c-=g,await this.registerSegment("tiff",l,c)}findExifLocIdInIinf(t){this.parseBoxFullHead(t);let e,i,n,s,l=t.start,c=this.file.getUint16(l);for(l+=2;c--;){if(e=this.parseBoxHead(l),this.parseBoxFullHead(e),i=e.start,e.version>=2&&(n=e.version===3?4:2,s=this.file.getString(i+n+2,4),s==="Exif"))return this.file.getUintBytes(i,n);l+=e.length}}get8bits(t){let e=this.file.getUint8(t);return[e>>4,15&e]}findExtentInIloc(t,e){this.parseBoxFullHead(t);let i=t.start,[n,s]=this.get8bits(i++),[l,c]=this.get8bits(i++),g=t.version===2?4:2,m=t.version===1||t.version===2?2:0,v=c+n+s,h=t.version===2?4:2,y=this.file.getUintBytes(i,h);for(i+=h;y--;){let u=this.file.getUintBytes(i,g);i+=g+m+2+l;let f=this.file.getUint16(i);if(i+=2,u===e)return f>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(i+c,n),this.file.getUintBytes(i+c+n,s)];i+=f*v}}},Ce=class extends Se{};$(Ce,"type","heic");var Ie=class extends Se{};$(Ie,"type","avif"),kt.set("heic",Ce),kt.set("avif",Ie),ut(ft,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),ut(ft,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),ut(ft,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),ut(vt,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);var ne=ut(vt,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]),Di={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};ne.set(37392,Di),ne.set(41488,Di);var We={0:"Normal",1:"Low",2:"High"};function zi(r){return typeof r=="object"&&r.length!==void 0?r[0]:r}function Ri(r){let t=Array.from(r).slice(1);return t[1]>15&&(t=t.map(e=>String.fromCharCode(e))),t[2]!=="0"&&t[2]!==0||t.pop(),t.join(".")}function He(r){if(typeof r=="string"){var[t,e,i,n,s,l]=r.trim().split(/[-: ]/g).map(Number),c=new Date(t,e-1,i);return Number.isNaN(n)||Number.isNaN(s)||Number.isNaN(l)||(c.setHours(n),c.setMinutes(s),c.setSeconds(l)),Number.isNaN(+c)?r:c}}function ie(r){if(typeof r=="string")return r;let t=[];if(r[1]===0&&r[r.length-1]===0)for(let e=0;e<r.length;e+=2)t.push(Li(r[e+1],r[e]));else for(let e=0;e<r.length;e+=2)t.push(Li(r[e],r[e+1]));return Bt(String.fromCodePoint(...t))}function Li(r,t){return r<<8|t}ne.set(41992,We),ne.set(41993,We),ne.set(41994,We),ut(Rt,["ifd0","ifd1"],[[50827,function(r){return typeof r!="string"?Ni(r):r}],[306,He],[40091,ie],[40092,ie],[40093,ie],[40094,ie],[40095,ie]]),ut(Rt,"exif",[[40960,Ri],[36864,Ri],[36867,He],[36868,He],[40962,zi],[40963,zi]]),ut(Rt,"gps",[[0,r=>Array.from(r).join(".")],[7,r=>Array.from(r).join(":")]]);var se=class extends gt{static canHandle(t,e){return t.getUint8(e+1)===225&&t.getUint32(e+4)===1752462448&&t.getString(e+4,20)==="http://ns.adobe.com/"}static headerLength(t,e){return t.getString(e+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(t,e){let i=super.findPosition(t,e);return i.multiSegment=i.extended=i.headerLength===79,i.multiSegment?(i.chunkCount=t.getUint8(e+72),i.chunkNumber=t.getUint8(e+76),t.getUint8(e+77)!==0&&i.chunkNumber++):(i.chunkCount=1/0,i.chunkNumber=-1),i}static handleMultiSegments(t){return t.map(e=>e.chunk.getString()).join("")}normalizeInput(t){return typeof t=="string"?t:_t.from(t).getString()}parse(t=this.chunk){if(!this.localOptions.parse)return t;t=function(s){let l={},c={};for(let g of Ki)l[g]=[],c[g]=0;return s.replace(Br,(g,m,v)=>{if(m==="<"){let h=++c[v];return l[v].push(h),`${g}#${h}`}return`${g}#${l[v].pop()}`})}(t);let e=xe.findAll(t,"rdf","Description");e.length===0&&e.push(new xe("rdf","Description",void 0,t));let i,n={};for(let s of e)for(let l of s.properties)i=Lr(l.ns,n),Vi(l,i);return function(s){let l;for(let c in s)l=s[c]=ve(s[c]),l===void 0&&delete s[c];return ve(s)}(n)}assignToOutput(t,e){if(this.localOptions.parse)for(let[i,n]of Object.entries(e))switch(i){case"tiff":this.assignObjectToOutput(t,"ifd0",n);break;case"exif":this.assignObjectToOutput(t,"exif",n);break;case"xmlns":break;default:this.assignObjectToOutput(t,i,n)}else t.xmp=e}};$(se,"type","xmp"),$(se,"multiSegment",!0),ct.set("xmp",se);var ei=class r{static findAll(t){return Zi(t,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(r.unpackMatch)}static unpackMatch(t){let e=t[1],i=t[2],n=t[3].slice(1,-1);return n=Xi(n),new r(e,i,n)}constructor(t,e,i){this.ns=t,this.name=e,this.value=i}serialize(){return this.value}},xe=class r{static findAll(t,e,i){if(e!==void 0||i!==void 0){e=e||"[\\w\\d-]+",i=i||"[\\w\\d-]+";var n=new RegExp(`<(${e}):(${i})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else n=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return Zi(t,n).map(r.unpackMatch)}static unpackMatch(t){let e=t[1],i=t[2],n=t[4],s=t[8];return new r(e,i,n,s)}constructor(t,e,i,n){this.ns=t,this.name=e,this.attrString=i,this.innerXml=n,this.attrs=ei.findAll(i),this.children=r.findAll(n),this.value=this.children.length===0?Xi(n):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:t,name:e}=this;return t==="rdf"&&(e==="Seq"||e==="Bag"||e==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return Rr(this.children.map(zr));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let t={};for(let e of this.properties)Vi(e,t);return this.value!==void 0&&(t.value=this.value),ve(t)}};function Vi(r,t){let e=r.serialize();e!==void 0&&(t[r.name]=e)}var zr=r=>r.serialize(),Rr=r=>r.length===1?r[0]:r,Lr=(r,t)=>t[r]?t[r]:t[r]={};function Zi(r,t){let e,i=[];if(!r)return i;for(;(e=t.exec(r))!==null;)i.push(e);return i}function Xi(r){if(function(i){return i==null||i==="null"||i==="undefined"||i===""||i.trim()===""}(r))return;let t=Number(r);if(!Number.isNaN(t))return t;let e=r.toLowerCase();return e==="true"||e!=="false"&&r.trim()}var Ki=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],Br=new RegExp(`(<|\\/)(${Ki.join("|")})`,"g"),Ur=Object.freeze({__proto__:null,default:Dr,Exifr:St,fileParsers:kt,segmentParsers:ct,fileReaders:Ct,tagKeys:ft,tagValues:vt,tagRevivers:Rt,createDictionary:ut,extendDictionary:Gt,fetchUrlAsArrayBuffer:Mt,readBlobAsArrayBuffer:Nt,chunkedProps:Pt,otherSegments:Jt,segments:jt,tiffBlocks:lt,segmentsAndBlocks:Tt,tiffExtractables:Dt,inheritables:qt,allFormatters:zt,Options:Et,parse:ze,gpsOnlyOptions:ni,gps:Gi,thumbnailOnlyOptions:si,thumbnail:ji,thumbnailUrl:Wi,orientationOnlyOptions:ai,orientation:oi,rotations:li,get rotateCanvas(){return Ut},get rotateCss(){return Ft},rotation:Hi});var Bi=be("fs",r=>r.promises);Ct.set("fs",class extends Yt{async readWhole(){this.chunked=!1,this.fs=await Bi;let r=await this.fs.readFile(this.input);this._swapBuffer(r)}async readChunked(){this.chunked=!0,this.fs=await Bi,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(r,t){this.fh===void 0&&await this.open(),r+t>this.size&&(t=this.size-r);var e=this.subarray(r,t,!0);return await this.fh.read(e.dataView,0,t,r),e}async close(){if(this.fh){let r=this.fh;this.fh=void 0,await r.close()}}});Ct.set("base64",class extends Yt{constructor(...r){super(...r),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(r,t){let e,i,n=this.input;r===void 0?(r=0,e=0,i=0):(e=4*Math.floor(r/3),i=r-e/4*3),t===void 0&&(t=this.size);let s=r+t,l=e+4*Math.ceil(s/3);n=n.slice(e,l);let c=Math.min(t,this.size-r);if(De){let g=Te.from(n,"base64").slice(i,i+c);return this.set(g,r,!0)}{let g=this.subarray(r,c,!0),m=atob(n),v=g.toUint8();for(let h=0;h<c;h++)v[h]=m.charCodeAt(i+h);return g}}});var Ae=class extends Kt{static canHandle(t,e){return e===18761||e===19789}extendOptions(t){let{ifd0:e,xmp:i,iptc:n,icc:s}=t;i.enabled&&e.deps.add(700),n.enabled&&e.deps.add(33723),s.enabled&&e.deps.add(34675),e.finalizeFilters()}async parse(){let{tiff:t,xmp:e,iptc:i,icc:n}=this.options;if(t.enabled||e.enabled||i.enabled||n.enabled){let s=Math.max(Ve(this.options),this.options.chunkSize);await this.file.ensureChunk(0,s),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(t){if(this.parsers.tiff[t]){let e=this.parsers.tiff[t];this.injectSegment(t,e)}}};$(Ae,"type","tiff"),kt.set("tiff",Ae);var Fr=be("zlib"),Mr=["ihdr","iccp","text","itxt","exif"],Ee=class extends Kt{constructor(...t){super(...t),$(this,"catchError",e=>this.errors.push(e)),$(this,"metaChunks",[]),$(this,"unknownChunks",[])}static canHandle(t,e){return e===35152&&t.getUint32(0)===2303741511&&t.getUint32(4)===218765834}async parse(){let{file:t}=this;await this.findPngChunksInRange(8,t.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(t,e){let{file:i}=this;for(;t<e;){let n=i.getUint32(t),s=i.getUint32(t+4),l=i.getString(t+4,4).toLowerCase(),c=n+4+4+4,g={type:l,offset:t,length:c,start:t+4+4,size:n,marker:s};Mr.includes(l)?this.metaChunks.push(g):this.unknownChunks.push(g),t+=c}}parseTextChunks(){let t=this.metaChunks.filter(e=>e.type==="text");for(let e of t){let[i,n]=this.file.getString(e.start,e.size).split("\0");this.injectKeyValToIhdr(i,n)}}injectKeyValToIhdr(t,e){let i=this.parsers.ihdr;i&&i.raw.set(t,e)}findIhdr(){let t=this.metaChunks.find(e=>e.type==="ihdr");t&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",t.chunk)}async findExif(){let t=this.metaChunks.find(e=>e.type==="exif");t&&this.injectSegment("tiff",t.chunk)}async findXmp(){let t=this.metaChunks.filter(e=>e.type==="itxt");for(let e of t)e.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",e.chunk)}async findIcc(){let t=this.metaChunks.find(c=>c.type==="iccp");if(!t)return;let{chunk:e}=t,i=e.getUint8Array(0,81),n=0;for(;n<80&&i[n]!==0;)n++;let s=n+2,l=e.getString(0,n);if(this.injectKeyValToIhdr("ProfileName",l),ye){let c=await Fr,g=e.getUint8Array(s);g=c.inflateSync(g),this.injectSegment("icc",g)}}};$(Ee,"type","png"),kt.set("png",Ee),ut(ft,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),Gt(ft,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);var Ui=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];Gt(ft,"ifd0",Ui),Gt(ft,"exif",Ui),ut(vt,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);var ae=class extends gt{static canHandle(t,e){return t.getUint8(e+1)===224&&t.getUint32(e+4)===1246120262&&t.getUint8(e+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}};$(ae,"type","jfif"),$(ae,"headerLength",9),ct.set("jfif",ae),ut(ft,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);var Oe=class extends gt{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}};$(Oe,"type","ihdr"),ct.set("ihdr",Oe),ut(ft,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),ut(vt,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);var Xt=class extends gt{static canHandle(t,e){return t.getUint8(e+1)===226&&t.getUint32(e+4)===1229144927}static findPosition(t,e){let i=super.findPosition(t,e);return i.chunkNumber=t.getUint8(e+16),i.chunkCount=t.getUint8(e+17),i.multiSegment=i.chunkCount>1,i}static handleMultiSegments(t){return function(e){let i=function(n){let s=n[0].constructor,l=0;for(let m of n)l+=m.length;let c=new s(l),g=0;for(let m of n)c.set(m,g),g+=m.length;return c}(e.map(n=>n.chunk.toUint8()));return new _t(i)}(t)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:t}=this;this.chunk.byteLength<84&&dt("ICC header is too short");for(let[e,i]of Object.entries(Nr)){e=parseInt(e,10);let n=i(this.chunk,e);n!=="\0\0\0\0"&&t.set(e,n)}}parseTags(){let t,e,i,n,s,{raw:l}=this,c=this.chunk.getUint32(128),g=132,m=this.chunk.byteLength;for(;c--;){if(t=this.chunk.getString(g,4),e=this.chunk.getUint32(g+4),i=this.chunk.getUint32(g+8),n=this.chunk.getString(e,4),e+i>m)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");s=this.parseTag(n,e,i),s!==void 0&&s!=="\0\0\0\0"&&l.set(t,s),g+=12}}parseTag(t,e,i){switch(t){case"desc":return this.parseDesc(e);case"mluc":return this.parseMluc(e);case"text":return this.parseText(e,i);case"sig ":return this.parseSig(e)}if(!(e+i>this.chunk.byteLength))return this.chunk.getUint8Array(e,i)}parseDesc(t){let e=this.chunk.getUint32(t+8)-1;return Bt(this.chunk.getString(t+12,e))}parseText(t,e){return Bt(this.chunk.getString(t+8,e-8))}parseSig(t){return Bt(this.chunk.getString(t+8,4))}parseMluc(t){let{chunk:e}=this,i=e.getUint32(t+8),n=e.getUint32(t+12),s=t+16,l=[];for(let c=0;c<i;c++){let g=e.getString(s+0,2),m=e.getString(s+2,2),v=e.getUint32(s+4),h=e.getUint32(s+8)+t,y=Bt(e.getUnicodeString(h,v));l.push({lang:g,country:m,text:y}),s+=n}return i===1?l[0].text:l}translateValue(t,e){return typeof t=="string"?e[t]||e[t.toLowerCase()]||t:e[t]||t}};$(Xt,"type","icc"),$(Xt,"multiSegment",!0),$(Xt,"headerLength",18);var Nr={4:At,8:function(r,t){return[r.getUint8(t),r.getUint8(t+1)>>4,r.getUint8(t+1)%16].map(e=>e.toString(10)).join(".")},12:At,16:At,20:At,24:function(r,t){let e=r.getUint16(t),i=r.getUint16(t+2)-1,n=r.getUint16(t+4),s=r.getUint16(t+6),l=r.getUint16(t+8),c=r.getUint16(t+10);return new Date(Date.UTC(e,i,n,s,l,c))},36:At,40:At,48:At,52:At,64:(r,t)=>r.getUint32(t),80:At};function At(r,t){return Bt(r.getString(t,4))}ct.set("icc",Xt),ut(ft,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);var ge={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},Fi={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};ut(vt,"icc",[[4,ge],[12,Fi],[40,Object.assign({},ge,Fi)],[48,ge],[80,ge],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);var Zt=class extends gt{static canHandle(t,e,i){return t.getUint8(e+1)===237&&t.getString(e+4,9)==="Photoshop"&&this.containsIptc8bim(t,e,i)!==void 0}static headerLength(t,e,i){let n,s=this.containsIptc8bim(t,e,i);if(s!==void 0)return n=t.getUint8(e+s+7),n%2!=0&&(n+=1),n===0&&(n=4),s+8+n}static containsIptc8bim(t,e,i){for(let n=0;n<i;n++)if(this.isIptcSegmentHead(t,e+n))return n}static isIptcSegmentHead(t,e){return t.getUint8(e)===56&&t.getUint32(e)===943868237&&t.getUint16(e+4)===1028}parse(){let{raw:t}=this,e=this.chunk.byteLength-1,i=!1;for(let n=0;n<e;n++)if(this.chunk.getUint8(n)===28&&this.chunk.getUint8(n+1)===2){i=!0;let s=this.chunk.getUint16(n+3),l=this.chunk.getUint8(n+2),c=this.chunk.getLatin1String(n+5,s);t.set(l,this.pluralizeValue(t.get(l),c)),n+=4+s}else if(i)break;return this.translate(),this.output}pluralizeValue(t,e){return t!==void 0?t instanceof Array?(t.push(e),t):[t,e]:e}};$(Zt,"type","iptc"),$(Zt,"translateValues",!1),$(Zt,"reviveValues",!1),ct.set("iptc",Zt),ut(ft,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),ut(vt,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);var Yi=Ur;function hi(r){return new Promise((t,e)=>{let i=new FileReader;i.onload=n=>{let s=new Image;s.onload=()=>t(s),s.onerror=e,s.src=n.target.result},i.onerror=e,i.readAsDataURL(r)})}async function Ji(r){try{let t=await Yi.parse(r,{xmp:!0});return{is_google:(t==null?void 0:t.Credit)==="Made with Google AI",is_original:["ImageWidth","ImageHeight"].every(e=>t==null?void 0:t[e])}}catch(t){return{is_google:!1,is_original:!1}}}var nr=br(Qi());var Wt=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Re=function(t){return t.tagName==="IMG"},Gr=function(t){return NodeList.prototype.isPrototypeOf(t)},Le=function(t){return t&&t.nodeType===1},$i=function(t){var e=t.currentSrc||t.src;return e.substr(-4).toLowerCase()===".svg"},tr=function(t){try{return Array.isArray(t)?t.filter(Re):Gr(t)?[].slice.call(t).filter(Re):Le(t)?[t].filter(Re):typeof t=="string"?[].slice.call(document.querySelectorAll(t)).filter(Re):[]}catch(e){throw new TypeError(`The provided selector is invalid.
Expects a CSS selector, a Node element, a NodeList or an array.
See: https://github.com/francoischalifour/medium-zoom`)}},jr=function(t){var e=document.createElement("div");return e.classList.add("medium-zoom-overlay"),e.style.background=t,e},Wr=function(t){var e=t.getBoundingClientRect(),i=e.top,n=e.left,s=e.width,l=e.height,c=t.cloneNode(),g=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,m=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return c.removeAttribute("id"),c.style.position="absolute",c.style.top=i+g+"px",c.style.left=n+m+"px",c.style.width=s+"px",c.style.height=l+"px",c.style.transform="",c},Qt=function(t,e){var i=Wt({bubbles:!1,cancelable:!1,detail:void 0},e);if(typeof window.CustomEvent=="function")return new CustomEvent(t,i);var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,i.bubbles,i.cancelable,i.detail),n},Hr=function r(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=window.Promise||function(o){function P(){}o(P,P)},n=function(o){var P=o.target;if(P===J){f();return}C.indexOf(P)!==-1&&d({target:P})},s=function(){if(!(R||!I.original)){var o=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(G-o)>O.scrollOffset&&setTimeout(f,150)}},l=function(o){var P=o.key||o.keyCode;(P==="Escape"||P==="Esc"||P===27)&&f()},c=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=o;if(o.background&&(J.style.background=o.background),o.container&&o.container instanceof Object&&(P.container=Wt({},O.container,o.container)),o.template){var X=Le(o.template)?o.template:document.querySelector(o.template);P.template=X}return O=Wt({},O,P),C.forEach(function(B){B.dispatchEvent(Qt("medium-zoom:update",{detail:{zoom:_}}))}),_},g=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return r(Wt({},O,o))},m=function(){for(var o=arguments.length,P=Array(o),X=0;X<o;X++)P[X]=arguments[X];var B=P.reduce(function(V,M){return[].concat(V,tr(M))},[]);return B.filter(function(V){return C.indexOf(V)===-1}).forEach(function(V){C.push(V),V.classList.add("medium-zoom-image")}),U.forEach(function(V){var M=V.type,Y=V.listener,T=V.options;B.forEach(function(A){A.addEventListener(M,Y,T)})}),_},v=function(){for(var o=arguments.length,P=Array(o),X=0;X<o;X++)P[X]=arguments[X];I.zoomed&&f();var B=P.length>0?P.reduce(function(V,M){return[].concat(V,tr(M))},[]):C;return B.forEach(function(V){V.classList.remove("medium-zoom-image"),V.dispatchEvent(Qt("medium-zoom:detach",{detail:{zoom:_}}))}),C=C.filter(function(V){return B.indexOf(V)===-1}),_},h=function(o,P){var X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return C.forEach(function(B){B.addEventListener("medium-zoom:"+o,P,X)}),U.push({type:"medium-zoom:"+o,listener:P,options:X}),_},y=function(o,P){var X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return C.forEach(function(B){B.removeEventListener("medium-zoom:"+o,P,X)}),U=U.filter(function(B){return!(B.type==="medium-zoom:"+o&&B.listener.toString()===P.toString())}),_},u=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=o.target,X=function(){var V={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},M=void 0,Y=void 0;if(O.container)if(O.container instanceof Object)V=Wt({},V,O.container),M=V.width-V.left-V.right-O.margin*2,Y=V.height-V.top-V.bottom-O.margin*2;else{var T=Le(O.container)?O.container:document.querySelector(O.container),A=T.getBoundingClientRect(),q=A.width,Z=A.height,H=A.left,nt=A.top;V=Wt({},V,{width:q,height:Z,left:H,top:nt})}M=M||V.width-O.margin*2,Y=Y||V.height-O.margin*2;var ot=I.zoomedHd||I.original,tt=$i(ot)?M:ot.naturalWidth||M,it=$i(ot)?Y:ot.naturalHeight||Y,st=ot.getBoundingClientRect(),at=st.top,yt=st.left,pt=st.width,a=st.height,L=Math.min(Math.max(pt,tt),M)/pt,D=Math.min(Math.max(a,it),Y)/a,b=Math.min(L,D),p=(-yt+(M-pt)/2+O.margin+V.left)/b,S=(-at+(Y-a)/2+O.margin+V.top)/b,F="scale("+b+") translate3d("+p+"px, "+S+"px, 0)";I.zoomed.style.transform=F,I.zoomedHd&&(I.zoomedHd.style.transform=F)};return new i(function(B){if(P&&C.indexOf(P)===-1){B(_);return}var V=function q(){R=!1,I.zoomed.removeEventListener("transitionend",q),I.original.dispatchEvent(Qt("medium-zoom:opened",{detail:{zoom:_}})),B(_)};if(I.zoomed){B(_);return}if(P)I.original=P;else if(C.length>0){var M=C;I.original=M[0]}else{B(_);return}if(I.original.dispatchEvent(Qt("medium-zoom:open",{detail:{zoom:_}})),G=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,R=!0,I.zoomed=Wr(I.original),document.body.appendChild(J),O.template){var Y=Le(O.template)?O.template:document.querySelector(O.template);I.template=document.createElement("div"),I.template.appendChild(Y.content.cloneNode(!0)),document.body.appendChild(I.template)}if(I.original.parentElement&&I.original.parentElement.tagName==="PICTURE"&&I.original.currentSrc&&(I.zoomed.src=I.original.currentSrc),document.body.appendChild(I.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),I.original.classList.add("medium-zoom-image--hidden"),I.zoomed.classList.add("medium-zoom-image--opened"),I.zoomed.addEventListener("click",f),I.zoomed.addEventListener("transitionend",V),I.original.getAttribute("data-zoom-src")){I.zoomedHd=I.zoomed.cloneNode(),I.zoomedHd.removeAttribute("srcset"),I.zoomedHd.removeAttribute("sizes"),I.zoomedHd.removeAttribute("loading"),I.zoomedHd.src=I.zoomed.getAttribute("data-zoom-src"),I.zoomedHd.onerror=function(){clearInterval(T),console.warn("Unable to reach the zoom image target "+I.zoomedHd.src),I.zoomedHd=null,X()};var T=setInterval(function(){I.zoomedHd.complete&&(clearInterval(T),I.zoomedHd.classList.add("medium-zoom-image--opened"),I.zoomedHd.addEventListener("click",f),document.body.appendChild(I.zoomedHd),X())},10)}else if(I.original.hasAttribute("srcset")){I.zoomedHd=I.zoomed.cloneNode(),I.zoomedHd.removeAttribute("sizes"),I.zoomedHd.removeAttribute("loading");var A=I.zoomedHd.addEventListener("load",function(){I.zoomedHd.removeEventListener("load",A),I.zoomedHd.classList.add("medium-zoom-image--opened"),I.zoomedHd.addEventListener("click",f),document.body.appendChild(I.zoomedHd),X()})}else X()})},f=function(){return new i(function(o){if(R||!I.original){o(_);return}var P=function X(){I.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(I.zoomed),I.zoomedHd&&document.body.removeChild(I.zoomedHd),document.body.removeChild(J),I.zoomed.classList.remove("medium-zoom-image--opened"),I.template&&document.body.removeChild(I.template),R=!1,I.zoomed.removeEventListener("transitionend",X),I.original.dispatchEvent(Qt("medium-zoom:closed",{detail:{zoom:_}})),I.original=null,I.zoomed=null,I.zoomedHd=null,I.template=null,o(_)};R=!0,document.body.classList.remove("medium-zoom--opened"),I.zoomed.style.transform="",I.zoomedHd&&(I.zoomedHd.style.transform=""),I.template&&(I.template.style.transition="opacity 150ms",I.template.style.opacity=0),I.original.dispatchEvent(Qt("medium-zoom:close",{detail:{zoom:_}})),I.zoomed.addEventListener("transitionend",P)})},d=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=o.target;return I.original?f():u({target:P})},w=function(){return O},k=function(){return C},x=function(){return I.original},C=[],U=[],R=!1,G=0,O=e,I={original:null,zoomed:null,zoomedHd:null,template:null};Object.prototype.toString.call(t)==="[object Object]"?O=t:(t||typeof t=="string")&&m(t),O=Wt({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},O);var J=jr(O.background);document.addEventListener("click",n),document.addEventListener("keyup",l),document.addEventListener("scroll",s),window.addEventListener("resize",f);var _={open:u,close:f,toggle:d,update:c,clone:g,attach:m,detach:v,on:h,off:y,getOptions:w,getImages:k,getZoomedImage:x};return _};function Vr(r,t){t===void 0&&(t={});var e=t.insertAt;if(!(!r||typeof document=="undefined")){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=r:n.appendChild(document.createTextNode(r))}}var Zr=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}";Vr(Zr);var er=Hr;var ue=null,It=[],ce=0,Ue=null,Ht=document.getElementById("uploadArea"),di=document.getElementById("fileInput"),fi=document.getElementById("singlePreview"),Be=document.getElementById("multiPreview"),sr=document.getElementById("imageList"),ir=document.getElementById("progressText"),gi=document.getElementById("downloadAllBtn"),Xr=document.getElementById("originalImage"),Fe=document.getElementById("processedSection"),Kr=document.getElementById("processedImage"),Yr=document.getElementById("originalInfo"),Jr=document.getElementById("processedInfo"),Me=document.getElementById("downloadBtn"),qr=document.getElementById("resetBtn"),pi=document.getElementById("loadingOverlay"),he=document.getElementById("statusMessage");function mi(r){pi.style.display="none";let t=pi.querySelector("p");t&&r&&(t.textContent=r)}function Ne(){pi.style.display="none"}function Vt(r,t){he&&(he.textContent=r||"",he.style.display=r?"block":"none",he.className="status-msg",t&&he.classList.add("status-"+t))}async function Qr(){document.body.classList.remove("loading");try{mi("Initialising Growmark Engine\u2026"),ue=await pe.create(),Ne(),$r(),Ue=er("[data-zoomable]",{margin:24,scrollOffset:0,background:"rgba(11,60,93,0.9)"})}catch(r){Ne(),Vt("Engine initialisation failed. Please refresh.","error"),console.error(r)}}function $r(){Ht.addEventListener("click",()=>di.click()),di.addEventListener("change",r=>rr(Array.from(r.target.files))),Ht.addEventListener("dragover",r=>{r.preventDefault(),Ht.classList.add("dragover")}),Ht.addEventListener("dragleave",()=>Ht.classList.remove("dragover")),Ht.addEventListener("drop",r=>{r.preventDefault(),Ht.classList.remove("dragover"),rr(Array.from(r.dataTransfer.files))}),gi.addEventListener("click",an),qr.addEventListener("click",tn)}function tn(){fi.style.display="none",Be.style.display="none",It=[],ce=0,di.value="",Vt(""),Fe&&(Fe.style.display="none"),Me&&(Me.style.display="none")}function rr(r){let t=r.filter(e=>e.type.match("image/(jpeg|png|webp)")&&e.size<=20971520);if(!t.length){Vt("Please upload JPG, PNG or WebP images under 20 MB.","warn");return}It.forEach(e=>{e.originalUrl&&URL.revokeObjectURL(e.originalUrl),e.processedUrl&&URL.revokeObjectURL(e.processedUrl)}),It=t.map((e,i)=>({id:Date.now()+i,file:e,name:e.name,status:"pending",originalImg:null,processedBlob:null,originalUrl:null,processedUrl:null})),ce=0,t.length===1?(fi.style.display="block",Be.style.display="none",en(It[0])):(fi.style.display="none",Be.style.display="block",sr.innerHTML="",gi.style.display="none",ar(),Be.scrollIntoView({behavior:"smooth",block:"start"}),It.forEach(e=>rn(e)),nn())}async function en(r){mi("Analysing image\u2026");try{let t=await hi(r.file);r.originalImg=t,Xr.src=t.src;let{is_google:e,is_original:i}=await Ji(r.file);e?i?Vt(""):Vt("Note: This may not be the original uncompressed file.","warn"):Vt("Note: Image does not appear to be a Gemini AI image.","warn");let n=ue.getWatermarkInfo(t.width,t.height);Yr.textContent=t.width+" \xD7 "+t.height+" px  \xB7  Watermark: "+n.size+"px @ ("+n.position.x+","+n.position.y+")",mi("Removing watermark\u2026");let s=await ue.removeWatermarkFromImage(t),l=await new Promise(c=>s.toBlob(c,"image/png"));r.processedBlob=l,r.processedUrl=URL.createObjectURL(l),Kr.src=r.processedUrl,Jr.textContent=t.width+" \xD7 "+t.height+" px  \xB7  Watermark removed \u2713",Fe.style.display="block",Me.style.display="flex",Me.onclick=()=>or(r),Ue.detach(),Ue.attach("[data-zoomable]"),Fe.scrollIntoView({behavior:"smooth",block:"start"}),Ne()}catch(t){Ne(),Vt("Processing failed. Please try again.","error"),console.error(t)}}function rn(r){let t=document.createElement("div");t.id="card-"+r.id,t.className="gm-card",t.innerHTML='<div class="gm-card-inner"><div class="gm-card-thumb-wrap"><img id="result-'+r.id+'" class="gm-card-thumb" data-zoomable alt="'+r.name+'" /></div><div class="gm-card-body"><p class="gm-card-name" title="'+r.name+'">'+r.name+'</p><p id="status-'+r.id+'" class="gm-card-status">Queued\u2026</p></div><div class="gm-card-action"><button id="download-'+r.id+'" class="gm-btn-dl hidden"><svg width="15" height="15" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>Download</button></div></div>',sr.appendChild(t)}async function nn(){await Promise.all(It.map(async t=>{let e=await hi(t.file);t.originalImg=e,t.originalUrl=e.src;let i=document.getElementById("result-"+t.id);i&&(i.src=e.src,Ue.attach("#result-"+t.id))}));let r=3;for(let t=0;t<It.length;t+=r)await Promise.all(It.slice(t,t+r).map(sn));ce>0&&(gi.style.display="flex")}async function sn(r){if(r.status==="pending"){r.status="processing",ci(r.id,"\u2699 Processing\u2026","proc");try{let t=await ue.removeWatermarkFromImage(r.originalImg),e=await new Promise(l=>t.toBlob(l,"image/png"));r.processedBlob=e,r.processedUrl=URL.createObjectURL(e);let i=document.getElementById("result-"+r.id);i&&(i.src=r.processedUrl);let n=ue.getWatermarkInfo(r.originalImg.width,r.originalImg.height);ci(r.id,r.originalImg.width+"\xD7"+r.originalImg.height+"  WM "+n.size+"px removed \u2713","done");let s=document.getElementById("download-"+r.id);s&&(s.classList.remove("hidden"),s.onclick=()=>or(r)),r.status="completed",ce++,ar()}catch(t){r.status="error",ci(r.id,"\u2715 Failed","error"),console.error(t)}}}function ci(r,t,e){let i=document.getElementById("status-"+r);i&&(i.textContent=t,i.className="gm-card-status",e&&i.classList.add(e))}function ar(){ir&&(ir.textContent="Processed: "+ce+" / "+It.length)}function or(r){let t=document.createElement("a");t.href=r.processedUrl,t.download="growmark_"+r.name.replace(/\.[^.]+$/,"")+".png",t.click()}async function an(){let r=It.filter(n=>n.status==="completed");if(!r.length)return;let t=new nr.default;r.forEach(n=>t.file("growmark_"+n.name.replace(/\.[^.]+$/,"")+".png",n.processedBlob));let e=await t.generateAsync({type:"blob"}),i=document.createElement("a");i.href=URL.createObjectURL(e),i.download="growmark_batch_"+Date.now()+".zip",i.click()}Qr();})();
/*! Bundled license information:

jszip/dist/jszip.min.js:
  (*!
  
  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
  <http://stuartk.com/jszip>
  
  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.
  
  JSZip uses the library pako released under the MIT license :
  https://github.com/nodeca/pako/blob/main/LICENSE
  *)

medium-zoom/dist/medium-zoom.esm.js:
  (*! medium-zoom 1.1.0 | MIT License | https://github.com/francoischalifour/medium-zoom *)
*/
